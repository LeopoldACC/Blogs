<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="状压DP, Leopold">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>状压DP | Leopold</title>
    <link rel="icon" type="image/jpeg" href="/Blogs/myself.jpg">

    <link rel="stylesheet" type="text/css" href="/Blogs/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/Blogs/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/Blogs/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/Blogs/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/Blogs/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/Blogs/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/Blogs/css/my.css">

    <script src="/Blogs/libs/jquery/jquery.min.js"></script>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.2.0"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/Blogs/" class="waves-effect waves-light">
                    
                    <img src="/Blogs/medias/myself.jpg" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Leopold</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/Blogs/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/Blogs/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/Blogs/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/Blogs/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/Blogs/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/Blogs/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/Blogs/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/Blogs/medias/myself.jpg" class="logo-img circle responsive-img">
        
        <div class="logo-name">Leopold</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/Blogs/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/Blogs/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/Blogs/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/Blogs/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/Blogs/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/Blogs/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/Blogs/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/LeopoldACC" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/LeopoldACC" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/Blogs/medias/featureimages/9.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">状压DP</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/Blogs/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/Blogs/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">
                                <span class="chip bg-color">动态规划</span>
                            </a>
                        
                            <a href="/Blogs/tags/%E7%8A%B6%E6%80%81%E5%8E%8B%E7%BC%A9/">
                                <span class="chip bg-color">状态压缩</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/Blogs/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" class="post-category">
                                数据结构与算法
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-12-07
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/Blogs/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <p><strong>看到题目有什么特点可以用状压？</strong></p>
<details>
<summary>提示1</summary>
<pre><code>
集合类状压
可以用比较少(小于30)的集合表示当前某些数/物品 用(多少)/没用 的状态
</code></pre>
</details>

<details>
<summary>提示2</summary>
<pre><code>
连通类状压
棋盘/树(长或宽小于30)中按某种规则放置固定长度的 物品
</code></pre>
</details>

<h2 id="集合类状态压缩动态规划"><a href="#集合类状态压缩动态规划" class="headerlink" title="集合类状态压缩动态规划"></a>集合类状态压缩动态规划</h2><details>
<summary>枚举子集模板</summary>
<pre><code>
for(int subset=set;subset!=0;subset=(subset-1)&set)
&#123;
    f[set] = f[subset] + 转移规则
&#125;
subset = set
while(subset):
    f[set] = f[subset] + 转移规则 
    subset = (subset-1)&set
</code></pre>
</details>

<h2 id="acwing91-最短Hamilton路径-旅行商问题"><a href="#acwing91-最短Hamilton路径-旅行商问题" class="headerlink" title="acwing91 最短Hamilton路径-旅行商问题"></a>acwing91 最短Hamilton路径-旅行商问题</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token number">1</span> 注意<span class="token operator">+</span><span class="token operator">-</span>的优先级大于位运算
<span class="token number">2</span> <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>j<span class="token punctuation">)</span><span class="token operator">>></span>k <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">//</span>从状态i中去掉点j后 的集合<span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span>中包含点k<span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>j<span class="token punctuation">)</span><span class="token operator">>></span>k <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> 
则能从点k走到点j从而从状态f<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>j<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">+</span>w<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>到达状态f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
f<span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> f<span class="token punctuation">[</span>state_k<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">+</span>weight<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token punctuation">,</span> state_k <span class="token operator">=</span> state集合除掉j之后的子集 state_k包含点k

state怎么表示一个集合？ <span class="token operator">-</span><span class="token operator">></span>二进制 位置上<span class="token number">1</span>代表包含<span class="token number">0</span>代表不包含
<span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span>
state <span class="token operator">=</span> <span class="token number">10011</span>

state表示哪些点被用过 
j代表当前停在哪个点上<span class="token operator">-</span><span class="token operator">></span>state除掉j 
走过点的集合i中去除掉点j表示：i <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> j<span class="token punctuation">)</span>，
比方说i是<span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">&#125;</span>，j是<span class="token number">1</span>，那么i <span class="token operator">=</span> <span class="token number">10011</span>，<span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> j<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">10</span>，i <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> j<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">10001</span>

在函数里定义的变量 存放在栈里<span class="token operator">-</span><span class="token operator">></span>C<span class="token operator">+</span><span class="token operator">+</span>默认的栈的大小4MB 所以大数组开在外面比较安全
定义为static变量 存放在堆里<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;cstring></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;algorithm></span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span>M<span class="token operator">=</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token number">20</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> n<span class="token punctuation">;</span>
<span class="token keyword">int</span> f<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>weight<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    cin <span class="token operator">>></span> n<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            cin <span class="token operator">>></span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token function">memset</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span><span class="token number">0x3f</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>
    f<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//最开始的时候 我们这个人在0号点 状态集合里只包含0这1个点 所以状态表示就是1 在0没走过任何路程 所以初始0</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment">//枚举所有状态</span>
    <span class="token punctuation">&#123;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment">//对于第j位不用   i - (1&lt;&lt;j) 比方j=3 那么i-(1 &lt;&lt; j)表示不用第j位  </span>
        <span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">>></span> j<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//首先判断状态i是否合法 即该集合里是否包含j 判断i的第j位是否是1 把第j位移到个位和0001比</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>k<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment">//f[i][j] = f[i_k][j]+weight[k][j]</span>
            <span class="token punctuation">&#123;</span><span class="token comment">//i_k = i-(1&lt;&lt;j)的第k位是否是1</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> j<span class="token punctuation">)</span> <span class="token operator">>></span> k <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span>
                    f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> j<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">+</span>weight<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    cout <span class="token operator">&lt;&lt;</span> f<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">//1&lt;&lt;n表示所有点都遍历过了 并且停在了n-1点上</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="leetcode-351-安卓系统手势解锁"><a href="#leetcode-351-安卓系统手势解锁" class="headerlink" title="leetcode 351 安卓系统手势解锁"></a>leetcode 351 安卓系统手势解锁</h2><p>我们都知道安卓有个手势解锁的界面，是一个 3 x 3 的点所绘制出来的网格。用户可以设置一个 “解锁模式” ，通过连接特定序列中的点，形成一系列彼此连接的线段，每个线段的端点都是序列中两个连续的点。如果满足以下两个条件，则 k 点序列是有效的解锁模式：</p>
<p>以下是一些有效和无效解锁模式的示例：</p>
<p>无效手势：<code>[4,1,3,6]</code> ，连接点 <code>1</code> 和点<code>3</code> 时经过了未被连接过的<code>2</code> 号点。<br>无效手势：<code>[4,1,9,2]</code> ，连接点 <code>1</code> 和点 <code>9</code> 时经过了未被连接过的 <code>5</code>号点。<br>有效手势：<code>[2,4,1,3,6]</code> ，连接点 <code>1</code> 和点<code>3</code> 是有效的，因为虽然它经过了点<code>2</code> ，但是点 <code>2</code> 在该手势中之前已经被连过了。<br>有效手势：<code>[6,5,4,1,9,2]</code> ，连接点 <code>1</code> 和点<code>9</code> 是有效的，因为虽然它经过了按键 <code>5</code> ，但是点<code>5</code> 在该手势中之前已经被连过了。<br>给你两个整数，分别为 <code>m</code> 和 <code>n</code> ，那么请你统计一下有多少种 不同且有效的解锁模式 ，是至少需要经过 <code>m</code> 个点，但是不超过 <code>n</code> 个点的。</p>
<p>两个解锁模式不同需满足：经过的点不同或者经过点的顺序不同。</p>
<p>解锁模式中的所有点 互不相同。<br>假如模式中两个连续点的线段需要经过其他点，那么要经过的点必须事先出现在序列中（已经经过），不能跨过任何还未被经过的点。</p>
<p>$f[i][j][state]$ 代表$state$状态下 最后落点$j$ 总共划了$i+1$个点的可能性总数<br>初始化 $f[0][k][00k00]=1$<br>状态转移条件:<br>$j-&gt;k$ </p>
<ul>
<li>1.$k-&gt;j$不需要中间节点(k和j相邻时) $cond[j][k]==0$</li>
<li>2.当前状态$state$中有$k-&gt;j$的中间节点$cond[j][k]$</li>
</ul>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">numberOfPatterns</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> m<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>k<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span>
        cond <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">9</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token comment"># 三条横的中间点要到</span>
        cond<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> cond<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">)</span>
        cond<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> cond<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token number">4</span><span class="token punctuation">)</span>
        cond<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> cond<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token number">7</span><span class="token punctuation">)</span>
        <span class="token comment"># 三条纵的中间点要到</span>
        cond<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> cond<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token number">3</span><span class="token punctuation">)</span>
        cond<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> cond<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token number">4</span><span class="token punctuation">)</span>
        cond<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> cond<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token number">5</span><span class="token punctuation">)</span>
        <span class="token comment"># 两条对角的中间点要到</span>
        cond<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> cond<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token number">4</span><span class="token punctuation">)</span>
        cond<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> cond<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token number">4</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token keyword">for</span> state <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                        <span class="token keyword">if</span> f<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span> <span class="token keyword">or</span> <span class="token punctuation">(</span>state<span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">:</span>
                            <span class="token keyword">continue</span>
                        <span class="token comment">#1 k->j不需要中间节点(当两点相邻时) 2 当前状态state中有k->j的中间节点</span>
                        <span class="token keyword">if</span> k<span class="token operator">!=</span>j <span class="token keyword">and</span> <span class="token punctuation">(</span>cond<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span> <span class="token keyword">or</span> state<span class="token operator">&amp;</span>cond<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                            f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>state <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>j<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+=</span> f<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>state<span class="token punctuation">]</span> 
        res <span class="token operator">=</span> <span class="token number">0</span>
         
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#为啥是m-1->n-1 因为m-1代表m个点</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">for</span> state <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    res <span class="token operator">+=</span> f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>state<span class="token punctuation">]</span>
        <span class="token keyword">return</span> res<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="leetcode464-我能赢吗-博弈状压"><a href="#leetcode464-我能赢吗-博弈状压" class="headerlink" title="leetcode464 我能赢吗-博弈状压"></a>leetcode464 我能赢吗-博弈状压</h2><p>在 <code>&quot;100 game&quot;</code> 这个游戏中，两名玩家轮流选择从 <code>1</code> 到 <code>10</code> 的任意整数，累计整数和，先使得累计整数和达到或超过 <code>100</code> 的玩家，即为胜者。</p>
<p>如果我们将游戏规则改为 “玩家不能重复使用整数” 呢？</p>
<p>例如，两个玩家可以轮流从公共整数池中抽取从 <code>1</code> 到 <code>15</code> 的整数（不放回），直到累计整数和 <code>&gt;= 100</code>。</p>
<p>给定一个整数<code>maxChoosableInteger</code>（整数池中可选择的最大数）和另一个整数<code>desiredTotal</code>（累计和），判断先出手的玩家是否能稳赢（假设两位玩家游戏时都表现最佳）？</p>
<p>你可以假设<code>maxChoosableInteger</code>不会大于 <code>20</code>，<code>desiredTotal</code>不会大于 <code>300</code>。</p>
<h3 id="博弈状压dp"><a href="#博弈状压dp" class="headerlink" title="博弈状压dp"></a>博弈状压dp</h3><p><code>maxChoosableInteger</code>不会大于 <code>20</code><br>不可重复用一个数，则可以用二进制<code>state</code>的第<code>i</code>位是<code>1</code>代表当前和用了<code>i</code><br>$f[state]$代表对当前操作的人而言当前状态能赢还是必输:<br>遍历$[1,maxChoosableInteger]$中每个当前状态$state$还未选的$i$,则当前能赢的两个条件</p>
<ul>
<li>1.当前操作$+$的数$i&gt;=$剩余目标和$resid$</li>
<li>2.当前操作$+i$后,留给对手的状态使得对手必输</li>
</ul>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">canIWin</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> maxChoosableInteger<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> desiredTotal<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
        <span class="token comment"># 如果可选的最大>目标和 先手直接赢</span>
        <span class="token keyword">if</span> maxChoosableInteger<span class="token operator">>=</span>desiredTotal<span class="token punctuation">:</span><span class="token keyword">return</span> <span class="token boolean">True</span>
        <span class="token comment"># 如果两个人把所有数都用完了依然&lt;目标和 先手后手都输</span>
        <span class="token keyword">if</span> maxChoosableInteger<span class="token operator">*</span><span class="token punctuation">(</span>maxChoosableInteger<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span><span class="token operator">&lt;</span>desiredTotal<span class="token punctuation">:</span><span class="token keyword">return</span> <span class="token boolean">False</span>
        f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>maxChoosableInteger<span class="token punctuation">)</span>
        <span class="token comment"># 当前操作时剩余目标和,当前状态</span>
        <span class="token keyword">def</span> <span class="token function">dfs</span><span class="token punctuation">(</span>resid<span class="token punctuation">,</span>state<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> f<span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> f<span class="token punctuation">[</span>state<span class="token punctuation">]</span>
            <span class="token comment"># 遍历每个候选可用位</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>maxChoosableInteger<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                tmp <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token comment"># 该位还没被用过</span>
                <span class="token keyword">if</span> tmp <span class="token operator">&amp;</span> state <span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>
                    <span class="token comment"># 如果剩下的目标和&lt;当前做加操作的人选的+的i or 对手选了i但输了</span>
                    <span class="token keyword">if</span> resid<span class="token operator">&lt;=</span>i <span class="token keyword">or</span> <span class="token keyword">not</span> dfs<span class="token punctuation">(</span>resid<span class="token operator">-</span>i<span class="token punctuation">,</span>tmp<span class="token operator">|</span>state<span class="token punctuation">)</span><span class="token punctuation">:</span>
                        f<span class="token punctuation">[</span>state<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>
                        <span class="token keyword">return</span> <span class="token boolean">True</span>
            f<span class="token punctuation">[</span>state<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>
        <span class="token keyword">return</span> dfs<span class="token punctuation">(</span>desiredTotal<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="leetcode-526-优美的排列"><a href="#leetcode-526-优美的排列" class="headerlink" title="leetcode 526 优美的排列"></a>leetcode 526 优美的排列</h2><p>假设有从 <code>1</code> 到 <code>N</code> 的<code>N</code>个整数，如果从这<code>N</code>个数字中成功构造出一个数组，使得数组的第 <code>i</code>位 <code>(1 &lt;= i &lt;= N)</code> 满足如下两个条件中的一个，我们就称这个数组为一个优美的排列。条件：</p>
<p>第<code>i</code>位的数字能被<code>i</code>整除<br><code>i</code> 能被第 <code>i</code> 位上的数字整除<br>现在给定一个整数 <code>N</code>，请问可以构造多少个优美的排列？</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例:"></a>示例:</h3><pre class="line-numbers language-none"><code class="language-none">输入: 2
输出: 2
解释: 

第 1 个优美的排列是 [1, 2]:
  第 1 个位置（i&#x3D;1）上的数字是1，1能被 i（i&#x3D;1）整除
  第 2 个位置（i&#x3D;2）上的数字是2，2能被 i（i&#x3D;2）整除

第 2 个优美的排列是 [2, 1]:
  第 1 个位置（i&#x3D;1）上的数字是2，2能被 i（i&#x3D;1）整除
  第 2 个位置（i&#x3D;2）上的数字是1，i（i&#x3D;2）能被 1 整除<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="数据范围"><a href="#数据范围" class="headerlink" title="数据范围"></a>数据范围</h3><ul>
<li>1.<code>N</code> 是一个正整数，并且不会超过<code>15</code>。</li>
</ul>
<h3 id="状压dp"><a href="#状压dp" class="headerlink" title="状压dp"></a>状压dp</h3><ul>
<li>状态表示<br>  $f[state][i]$代表当前已经排好的集合$state$,以及当前序列最后一个数是$i$</li>
<li>状态转移<br>  $通过cnt1(state)$计算一个二进制数中1的个数得到当前序列长度,则新加入序列的$ne$在序列中的就是第$cnt1(state)+1$个<br>  同时需要满足优美排列<br>  $ne\%(cnt1(state)+1)==0或(cnt1(state)+1)\%ne==0$时<br>  $f[state|ne][ne] +=f[state][cur]$</li>
</ul>
<h3 id="答案"><a href="#答案" class="headerlink" title="答案"></a>答案</h3><p>以任意一个数作为序列结尾,序列中包含所有<code>1~N</code>中的数的方案数之和$\sum_{i=1}^{N}f[(1&lt;&lt;N)-1][i]$</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">countArrangement</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> N<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span>N <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>N<span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">def</span> <span class="token function">cnt1</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
            res <span class="token operator">=</span> <span class="token number">0</span>
            <span class="token keyword">while</span> x<span class="token punctuation">:</span>
                x <span class="token operator">-=</span> x<span class="token operator">&amp;</span><span class="token operator">-</span>x
                res<span class="token operator">+=</span><span class="token number">1</span>
            <span class="token keyword">return</span> res
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token punctuation">:</span>
            f<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span>
        
        <span class="token keyword">for</span> state <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>N<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> cur <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token operator">>></span>cur<span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token number">1</span><span class="token punctuation">:</span>
                    <span class="token keyword">for</span> ne <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token punctuation">:</span>
                        <span class="token keyword">if</span> cur<span class="token operator">==</span>ne <span class="token keyword">or</span> <span class="token punctuation">(</span>state<span class="token operator">>></span>ne<span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token keyword">continue</span>
                        idx <span class="token operator">=</span> cnt1<span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>ne<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span>idx<span class="token operator">==</span><span class="token number">0</span> <span class="token keyword">or</span> idx<span class="token operator">%</span><span class="token punctuation">(</span>ne<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>
                            f<span class="token punctuation">[</span>state<span class="token operator">|</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>ne<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>ne<span class="token punctuation">]</span><span class="token operator">+=</span>f<span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token punctuation">[</span>cur<span class="token punctuation">]</span> <span class="token comment">#状态state最后一个是第i个      </span>
        res <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token punctuation">:</span>
            res<span class="token operator">+=</span>f<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>N<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> 
        <span class="token keyword">return</span> res<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="leetcode-638-大礼包-7进制状压"><a href="#leetcode-638-大礼包-7进制状压" class="headerlink" title="leetcode 638 大礼包-7进制状压"></a>leetcode 638 大礼包-7进制状压</h2><p>在LeetCode商店中， 有许多在售的物品。</p>
<p>然而，也有一些大礼包，每个大礼包以优惠的价格捆绑销售一组物品。</p>
<p>现给定每个物品的价格，每个大礼包包含物品的清单，以及待购物品清单。请输出确切完成待购清单的最低花费。</p>
<p>每个大礼包的由一个数组中的一组数据描述，最后一个数字代表大礼包的价格，其他数字分别表示内含的其他种类物品的数量。</p>
<p>任意大礼包可无限次购买。</p>
<h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><pre class="line-numbers language-none"><code class="language-none">输入: [2,5], [[3,0,5],[1,2,10]], [3,2]
输出: 14
解释: 
有A和B两种物品，价格分别为¥2和¥5。
大礼包1，你可以以¥5的价格购买3A和0B。
大礼包2， 你可以以¥10的价格购买1A和2B。
你需要购买3个A和2个B， 所以你付了¥10购买了1A和2B（大礼包2），以及¥4购买2A。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="数据范围-1"><a href="#数据范围-1" class="headerlink" title="数据范围"></a>数据范围</h3><ul>
<li>1.最多6种物品， 100种大礼包。</li>
<li>2.每种物品，你最多只需要购买6个。</li>
<li>3.你不可以购买超出待购清单的物品，即使更便宜。</li>
</ul>
<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>由条件<code>1,2</code>可知最终答案的每个礼包的个数最多只需用7位<code>7</code>进制数来描述</p>
<ul>
<li><p>状态表示<br>  $f[state]$:$7$进制集合状态$state$下的最小</p>
</li>
<li><p>状态转移<br>  遍历每个礼包<br>  $ne = cur|(speacial[i])_{7进制}$</p>
<p>  转移条件:$ne_{7进制}$中的每一位不能超过$needs_{7进制}$中的每一位</p>
<p>  $f[ne] = min(f[ne],f[cur]+sum(speacial[i])_{10进制}) $</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">shoppingOffers</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> price<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> special<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> needs<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        dec <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">49</span><span class="token punctuation">,</span><span class="token number">343</span><span class="token punctuation">,</span><span class="token number">2401</span><span class="token punctuation">,</span><span class="token number">16807</span><span class="token punctuation">,</span><span class="token number">117649</span><span class="token punctuation">]</span>
        <span class="token comment">#把集合S数组转换为7进制的10进制表示的集合状态</span>
        <span class="token keyword">def</span> <span class="token function">get7state</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            res <span class="token operator">=</span> <span class="token number">0</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
                res<span class="token operator">+=</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">*</span>dec<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            <span class="token keyword">return</span> res
        <span class="token comment">#检查是否可以再买一个礼包S--条件3:你不可以购买超出待购清单的物品，即使更便宜。</span>
        <span class="token keyword">def</span> <span class="token function">check</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>n<span class="token punctuation">,</span>pack<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#7进制第i位就是第i个物品的数量，加上当前大礼包后和needs的第i位a物品数量进行比较</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>pack<span class="token operator">%</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token operator">+</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">></span>needs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>
                    <span class="token keyword">return</span> <span class="token boolean">False</span>
                pack <span class="token operator">//=</span><span class="token number">7</span><span class="token comment">#相当于向右移一位，那么前一位的物品就没了，下一次循环时pack%7 = 第i+1位的物品数。</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
        <span class="token comment">#把单件物品也封装成一个7进制礼包方便后面进行完全背包</span>
        <span class="token comment"># 在示例1中相当于[1,0,2] [0,1,5]</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            tmp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
            tmp<span class="token punctuation">[</span><span class="token builtin">len</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">=</span>price<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            tmp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span>
            special<span class="token punctuation">.</span>append<span class="token punctuation">(</span>tmp<span class="token punctuation">)</span>
        <span class="token comment">#[[3,0,5],[1,2,10],[1,0,2],[0,1,5]]</span>
        box <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>special<span class="token punctuation">)</span><span class="token comment">#礼包种类数 4</span>
        goods <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span><span class="token comment">#物品种类数 2</span>
        <span class="token comment"># 7进制下的物品数集合状态 [3,2] 3*1+2*7</span>
        tot <span class="token operator">=</span> get7state<span class="token punctuation">(</span>needs<span class="token punctuation">,</span>goods<span class="token punctuation">)</span>
        f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span>tot<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">#17</span>
        f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span>
        <span class="token comment"># 背包问题</span>
        <span class="token comment"># 遍历第i个礼包</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>box<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># 遍历体积</span>
            <span class="token keyword">for</span> cur <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>tot<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token comment"># 第i个大礼包能否再买一个</span>
                <span class="token keyword">if</span> <span class="token keyword">not</span> check<span class="token punctuation">(</span>special<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>goods<span class="token punctuation">,</span>cur<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">continue</span>
                <span class="token comment"># 如果可以,则可以到达 下一个状态state = 当前7进制状态+第i个大礼包的7进制状态</span>
                ne <span class="token operator">=</span> cur<span class="token operator">+</span>get7state<span class="token punctuation">(</span>special<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>goods<span class="token punctuation">)</span>
                <span class="token comment"># 状态state最小花费为min(f[state],状态j最小花费+第i个大礼包的价格)</span>
                f<span class="token punctuation">[</span>ne<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>ne<span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token operator">+</span>special<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>goods<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> f<span class="token punctuation">[</span>tot<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="leetcode-691-贴纸拼词"><a href="#leetcode-691-贴纸拼词" class="headerlink" title="leetcode 691 贴纸拼词"></a>leetcode 691 贴纸拼词</h2><p>我们给出了 <code>N</code> 种不同类型的贴纸。每个贴纸上都有一个小写的英文单词。</p>
</li>
</ul>
<p>你希望从自己的贴纸集合中裁剪单个字母并重新排列它们，从而拼写出给定的目标字符串 <code>target</code>。</p>
<p>如果你愿意的话，你可以不止一次地使用每一张贴纸，而且每一张贴纸的数量都是无限的。</p>
<p>拼出目标<code>target</code> 所需的最小贴纸数量是多少？如果任务不可能，则返回 <code>-1</code>。</p>
<h3 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h3><pre class="line-numbers language-none"><code class="language-none">输入：[&quot;with&quot;, &quot;example&quot;, &quot;science&quot;], &quot;thehat&quot;
输出：3
解释：
我们可以使用 2 个 &quot;with&quot; 贴纸，和 1 个 &quot;example&quot; 贴纸。
把贴纸上的字母剪下来并重新排列后，就可以形成目标 “thehat“ 了。
此外，这是形成目标字符串所需的最小贴纸数量。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="数据范围-2"><a href="#数据范围-2" class="headerlink" title="数据范围"></a>数据范围</h3><ul>
<li><p>stickers 长度范围是[1, 50]。</p>
</li>
<li><p>stickers 由小写英文单词组成（不带撇号）。</p>
</li>
<li><p>target 的长度在[1, 15]范围内，由小写字母组成。</p>
</li>
<li><p>在所有的测试案例中，所有的单词都是从 1000 </p>
</li>
<li><p>个最常见的美国英语单词中随机选取的，目标是两个随机单词的串联。</p>
</li>
<li><p>时间限制可能比平时更具挑战性。预计 50 个贴纸的测试案例平均可在35ms内解决。</p>
</li>
</ul>
<h3 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h3><p>将$target$的每一位是否填充作为状态,通过填充$stickers$中包含$target$中字符串的$sticker$转移状态</p>
<ul>
<li><p>状态表示<br>  $f[state]$表示$target$填充状态为$state$时的最小取用贴纸次数</p>
</li>
<li><p>状态转移<br>  遍历每个能到达的状态$cur$<br>  从$cur$出发遍历$stickers[k]$<br>  遍历$cur$中位数为$0$的位$j$,其对应字符$target[j]$在$stickers[k]$中个数够用就把$cur[j]$填1<br>  $ne = cur + \sum(j&lt;&lt;1) 如果stickers[k]中target[j]够用$</p>
<p>  $f[ne] = f[cur]+1$</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">minStickers</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> stickers<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        n<span class="token punctuation">,</span>m <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>stickers<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
        f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>m<span class="token punctuation">)</span>
        cnt <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">26</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span>
        can <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token comment">#包含字母ch的sticker的序列</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> ch <span class="token keyword">in</span> stickers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>
                idx <span class="token operator">=</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token operator">-</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
                cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token operator">+=</span><span class="token number">1</span>
                <span class="token keyword">if</span> can<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token operator">==</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">or</span> can<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">!=</span>i<span class="token punctuation">:</span>
                    can<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>

        f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> cur <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>m<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> f<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token operator">==</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">continue</span>
            <span class="token comment"># 对于状态i中还是0的位 我们遍历一遍stickers[k]只要能填target[i]字符串 就填上 作为i能到达的一种ne状态</span>
            <span class="token comment"># 找第一个当前状态是0的字符串 target[d]对应的那些包含target[d]的stiker的下标数组can[d]---从而确保状态10 -> 11 和 01 -> 11的重复情况不出现</span>
            d <span class="token operator">=</span> <span class="token number">0</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token keyword">not</span> cur<span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>j<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    d <span class="token operator">=</span> j
                    <span class="token keyword">break</span>
            d <span class="token operator">=</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
            
            <span class="token keyword">for</span> k <span class="token keyword">in</span> can<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token punctuation">:</span>
                ne <span class="token operator">=</span> cur
                tmp <span class="token operator">=</span> cnt<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token comment">#创建一个临时统计量</span>
                <span class="token comment"># 遍历target每一位j</span>
                <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token comment"># 已经填好了的位不用管</span>
                    <span class="token keyword">if</span> ne<span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>j<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">continue</span>
                    <span class="token comment"># 如果stickers[k]还有字符串target[j]可填</span>
                    <span class="token keyword">if</span> tmp<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">:</span>
                        ne<span class="token operator">|</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>j<span class="token punctuation">)</span>
                        tmp<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">-=</span><span class="token number">1</span>
                f<span class="token punctuation">[</span>ne<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>ne<span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> f<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>m<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">if</span> f<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>m<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token operator">-</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>未优化重复情况$TLE$</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">minStickers</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> stickers<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        n<span class="token punctuation">,</span>m <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>stickers<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
        f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>m<span class="token punctuation">)</span>
        cnt <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">26</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> ch <span class="token keyword">in</span> stickers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>
                cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token operator">-</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">+=</span><span class="token number">1</span>
        
        f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> cur <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>m<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> f<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token operator">==</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">continue</span>
            <span class="token comment"># 对于状态i中还是0的位 我们遍历一遍stickers[k]只要能填target[i]字符串 就填上 作为i能到达的一种ne状态</span>
            <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
                ne <span class="token operator">=</span> cur
                tmp <span class="token operator">=</span> cnt<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
                <span class="token comment"># 遍历target每一位j</span>
                <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token comment"># 已经填好了的位不用管</span>
                    <span class="token keyword">if</span> ne<span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>j<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">continue</span>
                    <span class="token comment"># 如果stickers[k]还有字符串target[j]可填</span>
                    <span class="token keyword">if</span> tmp<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">:</span>
                        ne<span class="token operator">|</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>j<span class="token punctuation">)</span>
                        tmp<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">-=</span><span class="token number">1</span>
                f<span class="token punctuation">[</span>ne<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>ne<span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> f<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>m<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">if</span> f<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>m<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token operator">-</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
</ul>
<h2 id="leetcode-698划分为k个相等的子集"><a href="#leetcode-698划分为k个相等的子集" class="headerlink" title="leetcode 698划分为k个相等的子集"></a>leetcode 698划分为k个相等的子集</h2><p>给定一个整数数组  <code>nums</code> 和一个正整数 <code>k</code>，找出是否有可能把这个数组分成 <code>k</code> 个非空子集，其总和都相等。</p>
<h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><pre class="line-numbers language-none"><code class="language-none">输入： nums &#x3D; [4, 3, 2, 3, 5, 2, 1], k &#x3D; 4
输出： True
说明： 有可能将其分成 4 个子集（5），（1,4），（2,3），（2,3）等于总和。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="数据范围-3"><a href="#数据范围-3" class="headerlink" title="数据范围"></a>数据范围</h3><ul>
<li><code>1 &lt;= k &lt;= len(nums) &lt;= 16</code></li>
<li><code>0 &lt; nums[i] &lt; 10000</code></li>
</ul>
<h3 id="状压dp-1"><a href="#状压dp-1" class="headerlink" title="状压dp"></a>状压dp</h3><ul>
<li>状态表示<br>$f[state]$用$state$中位数为$1$的数的集合满足状态转移约束<br>$tot[state]$用$state$中位数为$1$的数的集合的数的总和</li>
<li>状态转移<br>遍历每个能用的$num$<br>当前状态能转移到下一个状态的合法条件:<br>除去已经合法的分组的数，能不能和当前加进来的$num$组成一个新的组<br>即当前和余$target$下的数$resid$+$num$&lt;$target$:<br>即:当满足条件<script type="math/tex; mode=display">
tot[state] =k*target + resid \\\\
resid = tot[state]\quad mod\quad target \\\\
如果num+resid <=target => num<=target-resid\\\\</script>时，有<br>$f[state|idx[num]] = True $</li>
</ul>
<h3 id="答案-1"><a href="#答案-1" class="headerlink" title="答案"></a>答案</h3><p>$f[(1&lt;<len(nums))-1]$(能否到达所有数都被用上后的状态)
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">canPartitionKSubsets</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
        nums<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>
        target<span class="token punctuation">,</span>resid <span class="token operator">=</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token operator">//</span>k<span class="token punctuation">,</span><span class="token builtin">sum</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token operator">%</span>k
        <span class="token keyword">if</span> resid <span class="token keyword">or</span> nums<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">></span>target<span class="token punctuation">:</span><span class="token keyword">return</span> <span class="token boolean">False</span>
        f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token boolean">False</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span>
        f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>
        tot <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token keyword">for</span> state <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token keyword">not</span> f<span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token keyword">continue</span>
            <span class="token keyword">for</span> i<span class="token punctuation">,</span>num <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token comment"># 下一个状态ne</span>
                ne <span class="token operator">=</span> state<span class="token operator">|</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>i<span class="token punctuation">)</span>
                <span class="token keyword">if</span> state<span class="token operator">!=</span>ne <span class="token keyword">and</span> <span class="token keyword">not</span> f<span class="token punctuation">[</span>ne<span class="token punctuation">]</span><span class="token punctuation">:</span>
                    <span class="token comment"># 当前状态tot[state]=k*target + resid</span>
                    <span class="token comment">#        resid = tot[state]%target</span>
                    <span class="token comment"># 如果num+resid&lt;=target => num&lt;=target-resid 则我们可以把num加入当前集合 </span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>num<span class="token operator">&lt;=</span>target<span class="token operator">-</span><span class="token punctuation">(</span>tot<span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token operator">%</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                        f<span class="token punctuation">[</span>ne<span class="token punctuation">]</span><span class="token operator">=</span><span class="token boolean">True</span>
                        tot<span class="token punctuation">[</span>ne<span class="token punctuation">]</span> <span class="token operator">=</span> tot<span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token operator">+</span>num
                    <span class="token keyword">else</span><span class="token punctuation">:</span>
                        <span class="token keyword">break</span>
        <span class="token comment"># f[1&lt;&lt;len(nums)-1] = 用掉所有数之后且在状态转移过程中一直满足我们的约束</span>
        <span class="token keyword">return</span> f<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>
<h2 id="leetcode-847-访问所有节点的最短路径"><a href="#leetcode-847-访问所有节点的最短路径" class="headerlink" title="leetcode 847 访问所有节点的最短路径"></a>leetcode 847 访问所有节点的最短路径</h2><p>给出<code>graph</code>为有 <code>N</code> 个节点（编号为<code>0, 1, 2, ..., N-1</code>）的无向连通图。</p>
<p><code>graph.length = N</code>，且只有节点 <code>i</code>和 <code>j</code>连通时，<code>j != i</code>在列表<code>graph[i]</code>中恰好出现一次。</p>
<p>返回能够访问所有节点的最短路径的长度。你可以在任一节点开始和停止，也可以多次重访节点，并且可以重用边。</p>
<h3 id="示例-3"><a href="#示例-3" class="headerlink" title="示例"></a>示例</h3><pre class="line-numbers language-none"><code class="language-none">输入：[[1,2,3],[0],[0],[0]]
输出：4
解释：一个可能的路径为 [1,0,2,0,3]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="数据范围-4"><a href="#数据范围-4" class="headerlink" title="数据范围"></a>数据范围</h3><ul>
<li><code>1 &lt;= graph.length &lt;= 12</code></li>
<li><code>0 &lt;= graph[i].length &lt; graph.length</code></li>
</ul>
<h3 id="最短路-二进制状态表示"><a href="#最短路-二进制状态表示" class="headerlink" title="最短路 二进制状态表示"></a>最短路 二进制状态表示</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">shortestPathLength</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> graph<span class="token punctuation">)</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>graph<span class="token punctuation">)</span>
        queue <span class="token operator">=</span> collections<span class="token punctuation">.</span>deque<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> x<span class="token punctuation">,</span> x<span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>
        dist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">*</span>n <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>dist<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>

        <span class="token keyword">while</span> queue<span class="token punctuation">:</span>
            state<span class="token punctuation">,</span> cur <span class="token operator">=</span> queue<span class="token punctuation">.</span>popleft<span class="token punctuation">(</span><span class="token punctuation">)</span>
            d <span class="token operator">=</span> dist<span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token punctuation">[</span>cur<span class="token punctuation">]</span>
            <span class="token keyword">if</span> state <span class="token operator">==</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token keyword">return</span> d
            <span class="token keyword">for</span> ne <span class="token keyword">in</span> graph<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">:</span>
                state_ne <span class="token operator">=</span> state <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> ne<span class="token punctuation">)</span>
                <span class="token keyword">if</span> d <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> dist<span class="token punctuation">[</span>state_ne<span class="token punctuation">]</span><span class="token punctuation">[</span>ne<span class="token punctuation">]</span><span class="token punctuation">:</span>
                    dist<span class="token punctuation">[</span>state_ne<span class="token punctuation">]</span><span class="token punctuation">[</span>ne<span class="token punctuation">]</span> <span class="token operator">=</span> d <span class="token operator">+</span> <span class="token number">1</span>
                    queue<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">(</span>state_ne<span class="token punctuation">,</span>ne<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="状压dp-2"><a href="#状压dp-2" class="headerlink" title="状压dp"></a>状压dp</h3><ul>
<li>状态表示<br>  $f[state][i]$遍历过的节点集合$state$,落在点$i$上时最短路径长度</li>
<li>状态转移<br>  松弛$f[state|ne][ne] = f[state][cur]+1 \quad if \quad f[state][cur]+1 &lt;f[state|ne][ne]$</li>
</ul>
<p>假如说$state==state_{ne}$ 则说明$ne$在访问节点集合(已经被松弛更新过的点才会在$state$中)中,<br>且通过$ne$使得状态$state$有更短路,则需要重新对$state$所有点更新一遍确保更新ne后遍历顺序在ne前的点没有漏更新</p>
<p>比如<code>example1</code>的<code>[1,0,2,0,3]，1,0,2,0</code>和<code>1,0,2</code>对应状态一样都是<code>7(111)</code>，但是<code>1,0,2,0</code>是由<code>1,0,2</code>转移过来的，它们状态都是<code>7</code>，即$dp[7][0]$其实等于$dp[7][2]+1$。如果你只求一遍（即<code>while(repeat)</code>循环），就可能会导致你用$dp[7][2]$更新完$dp[7][0]$，你又有了新的$dp[7][0]$值，但是用$dp[7][0]$扩展路径的那一步循环已经过去了，你没有对$dp[7][0]$进行扩展，可能会漏掉一些路径。<br><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">shortestPathLength</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> graph<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>graph<span class="token punctuation">)</span>
        dist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">*</span>n <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token comment"># 从点i出发且只经过i的路径长度初始化为0</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            dist<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span>
        
        <span class="token keyword">for</span> state <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            repeat <span class="token operator">=</span> <span class="token boolean">True</span>
            <span class="token keyword">while</span> repeat<span class="token punctuation">:</span>
                repeat <span class="token operator">=</span> <span class="token boolean">False</span>
                <span class="token keyword">for</span> cur<span class="token punctuation">,</span>d <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>dist<span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token keyword">for</span> ne <span class="token keyword">in</span> graph<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">:</span>
                        state_ne <span class="token operator">=</span> state <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>ne<span class="token punctuation">)</span>
                        <span class="token keyword">if</span> d<span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span>dist<span class="token punctuation">[</span>state_ne<span class="token punctuation">]</span><span class="token punctuation">[</span>ne<span class="token punctuation">]</span><span class="token punctuation">:</span>
                            dist<span class="token punctuation">[</span>state_ne<span class="token punctuation">]</span><span class="token punctuation">[</span>ne<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token operator">+</span><span class="token number">1</span>
                            <span class="token keyword">if</span> state <span class="token operator">==</span> state_ne<span class="token punctuation">:</span>
                                repeat <span class="token operator">=</span> <span class="token boolean">True</span>
        <span class="token comment"># 答案 从点i作为终点且经过所有点的路径长度最小值</span>
        <span class="token keyword">return</span> <span class="token builtin">min</span><span class="token punctuation">(</span>dist<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>
<h2 id="leetcode-935-骑士拨号器-滚动数组状压"><a href="#leetcode-935-骑士拨号器-滚动数组状压" class="headerlink" title="leetcode 935 骑士拨号器-滚动数组状压"></a>leetcode 935 骑士拨号器-滚动数组状压</h2><p>骑士可以按$ne$所示进行移动：<br>$ne = [[4,6],[6,8],[7,9],[4,8],[3,9,0],[],[1,7,0],[2,6],[1,3],[2,4]]$<br>这一次，我们将“骑士” 放在电话拨号盘的任意数字键（如上图所示）上，接下来，骑士将会跳<code>N-1</code> 步。每一步必须是从一个数字键跳到另一个数字键。</p>
<p>每当它落在一个键上（包括骑士的初始位置），都会拨出键所对应的数字，总共按下<code>N</code> 位数字。</p>
<p>你能用这种方式拨出多少个不同的号码？</p>
<p>因为答案可能很大，所以输出答案模<code>10^9 + 7</code>。</p>
<h3 id="示例-4"><a href="#示例-4" class="headerlink" title="示例"></a>示例</h3><pre class="line-numbers language-none"><code class="language-none">输入：1
输出：10<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="数据范围-5"><a href="#数据范围-5" class="headerlink" title="数据范围"></a>数据范围</h3><ul>
<li><code>1 &lt;= N &lt;= 5000</code></li>
</ul>
<h3 id="思路-2"><a href="#思路-2" class="headerlink" title="思路"></a>思路</h3><p>因为每个位置$i$除第一次放置外只能由去确定的$ne[i]$的位置</p>
<ul>
<li>状态表示<br>  $f[i]$ 第$i$次跳完后跳到位置$i$的方案数</li>
<li>状态转移<br>  $f[ne[i]] += f[i]$</li>
</ul>
<h3 id="答案-2"><a href="#答案-2" class="headerlink" title="答案"></a>答案</h3><p>跳$n$次后落在$0~9$中每个数的方案数之和<br>$\sum_{i=0}^{9}f[i]$<br><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">knightDialer</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        ne <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
        f1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">10</span>
        mod <span class="token operator">=</span> <span class="token number">1e9</span><span class="token operator">+</span><span class="token number">7</span>
        <span class="token keyword">for</span> ep <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#我们已经放了一次在初始位置了 所以只需要循环n-1次</span>
            f2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">10</span>
            <span class="token keyword">for</span> idx<span class="token punctuation">,</span>pre <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>f1<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">for</span> nei <span class="token keyword">in</span> ne<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">:</span>
                    f2<span class="token punctuation">[</span>nei<span class="token punctuation">]</span><span class="token operator">+=</span>pre
                    f2<span class="token punctuation">[</span>nei<span class="token punctuation">]</span><span class="token operator">%=</span>mod
            f1 <span class="token operator">=</span> f2
        <span class="token keyword">return</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">sum</span><span class="token punctuation">(</span>f1<span class="token punctuation">)</span><span class="token operator">%</span>mod<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>
<h2 id="leetcode-943-最短超级串"><a href="#leetcode-943-最短超级串" class="headerlink" title="leetcode 943 最短超级串"></a>leetcode 943 最短超级串</h2><p>给定一个字符串数组 <code>A</code>，找到以 <code>A</code> 中每个字符串作为子字符串的最短字符串。</p>
<p>我们可以假设 <code>A</code> 中没有字符串是 <code>A</code> 中另一个字符串的子字符串。</p>
<h3 id="示例-5"><a href="#示例-5" class="headerlink" title="示例:"></a>示例:</h3><pre class="line-numbers language-none"><code class="language-none">输入：[&quot;alex&quot;,&quot;loves&quot;,&quot;leetcode&quot;]
输出：&quot;alexlovesleetcode&quot;
解释：&quot;alex&quot;，&quot;loves&quot;，&quot;leetcode&quot; 的所有排列都会被接受。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="数据范围-6"><a href="#数据范围-6" class="headerlink" title="数据范围"></a>数据范围</h3><ul>
<li>1.<code>1 &lt;= A.length &lt;= 12</code></li>
<li>2.<code>1 &lt;= A[i].length &lt;= 20</code></li>
</ul>
<h3 id="状压dp-3"><a href="#状压dp-3" class="headerlink" title="状压dp"></a>状压dp</h3><p>最终拼接的结果一定是累计重叠长度最长的情况<br>因此我们可以对<code>A</code>中每对第<code>i</code>、第<code>j</code>个字符串计算重叠长度<code>overlaps[i][j]</code></p>
<ul>
<li>状态表示<br>  $f[state][cur]$:当前接到总串尾巴上的是$A[cur]$,当前A数组总共用的状态为$state$的最大累计重叠长度</li>
<li>状态转移<br>  $f[state^pre][pre] = f[state][cur] + overlaps[pre][cur] \quad if 更新后&gt;更新前$<br>  同时维护一个$pre[state][cur]$作为当前用掉的字符串下标的集合$state$,最后一个接上的字符串下标$cur$时累计最大的前继下标</li>
</ul>
<h3 id="答案-3"><a href="#答案-3" class="headerlink" title="答案"></a>答案</h3><ul>
<li>则我们需要取用掉$n$个字符串后累计重叠长度最长时最后用到的字符串$idx\quad of \quad max(f[(1&lt;&lt;n)-1])$,通过$idx_{maxsums}$倒序向前推得有更新$sums_overlaps$的节点并加入拼接顺序列表$order$,同时考虑到有一部分字符串之间是没有重叠的,那么就得再用一个状态数组$st$记录加入$order$的字符串,对于没有加入的(与其他字符串无重叠的)字符串可以任意拼接至尾部</li>
<li>对$order$中的字符串进行拼接,因为我们有$overlaps[i-1][i]$,所以$order[i] = order[i][overlaps[i-1][i]:]$<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">shortestSuperstring</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> A<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">str</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span>

        overlaps <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span>n <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> i<span class="token punctuation">,</span>x <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> j<span class="token punctuation">,</span>y <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> i<span class="token operator">==</span>j<span class="token punctuation">:</span><span class="token keyword">continue</span>
                <span class="token keyword">for</span> ans <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token keyword">if</span> x<span class="token punctuation">.</span>endswith<span class="token punctuation">(</span>y<span class="token punctuation">[</span><span class="token punctuation">:</span>ans<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                        overlaps<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> ans
                        <span class="token keyword">break</span>

        f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span>n <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span>
        pre <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token boolean">None</span><span class="token punctuation">]</span><span class="token operator">*</span>n <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> state <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token operator">>></span>i<span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token number">1</span><span class="token punctuation">:</span>
                    state_pre <span class="token operator">=</span> state<span class="token operator">^</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>i<span class="token punctuation">)</span>
                    <span class="token keyword">if</span> state_pre<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token keyword">continue</span>
                    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>state_pre<span class="token operator">>></span>j<span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token number">1</span><span class="token punctuation">:</span>
                            <span class="token comment"># 累计重叠长度越大越好</span>
                            val <span class="token operator">=</span> f<span class="token punctuation">[</span>state_pre<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span>overlaps<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span>
                            <span class="token comment"># 选累计重叠长度最大的j作为前缀</span>
                            <span class="token keyword">if</span> val<span class="token operator">></span>f<span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>
                                f<span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> val
                                pre<span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> j

        <span class="token comment"># 根据最大累计重叠长度的前缀得到拼接顺序</span>
        order <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        state <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span>
        i <span class="token operator">=</span> f<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>index<span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#i = max(xrange(N), key = dp[-1].__getitem__)</span>
        <span class="token keyword">while</span> i <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span><span class="token comment">#为什么是not None 而不能while i:?因为i如果是0时 是有可能有pre[state][0]的 这种情况就会导致while循环提前停止</span>
            order<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>
            state<span class="token punctuation">,</span>i <span class="token operator">=</span> state<span class="token operator">^</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>pre<span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span>

        order <span class="token operator">=</span> order<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
        st <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token boolean">False</span><span class="token punctuation">]</span><span class="token operator">*</span>n

        <span class="token keyword">for</span> i <span class="token keyword">in</span> order<span class="token punctuation">:</span>
            st<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token boolean">True</span>
        <span class="token comment"># order.extend([i for i in xrange(N) if not seen[i]])</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token keyword">not</span> st<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>
                order<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span> 
        res <span class="token operator">=</span> <span class="token punctuation">[</span>A<span class="token punctuation">[</span>order<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            overlap <span class="token operator">=</span> overlaps<span class="token punctuation">[</span>order<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>order<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span>
            res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>A<span class="token punctuation">[</span>order<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>overlap<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>res<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
</ul>
<h2 id="leetcode-980不同路径Ⅲ"><a href="#leetcode-980不同路径Ⅲ" class="headerlink" title="leetcode 980不同路径Ⅲ"></a>leetcode 980不同路径Ⅲ</h2><p>在二维网格 <code>grid</code> 上，有 <code>4</code> 种类型的方格：</p>
<ul>
<li><code>1</code> 表示起始方格。且只有一个起始方格。</li>
<li><code>2</code> 表示结束方格，且只有一个结束方格。</li>
<li><code>0</code> 表示我们可以走过的空方格。</li>
<li><code>-1</code> 表示我们无法跨越的障碍。</li>
</ul>
<p><strong>返回在四个方向（上、下、左、右）上行走时，从起始方格到结束方格的不同路径的数目。</strong></p>
<p>每一个无障碍方格都要通过一次，但是一条路径中不能重复通过同一个方格。</p>
<h3 id="示例-6"><a href="#示例-6" class="headerlink" title="示例:"></a>示例:</h3><pre class="line-numbers language-none"><code class="language-none">输入：[[1,0,0,0],[0,0,0,0],[0,0,2,-1]]
输出：2
解释：我们有以下两条路径：
1. (0,0),(0,1),(0,2),(0,3),(1,3),(1,2),(1,1),(1,0),(2,0),(2,1),(2,2)
2. (0,0),(1,0),(2,0),(2,1),(1,1),(0,1),(0,2),(0,3),(1,3),(1,2),(2,2)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="数据范围-7"><a href="#数据范围-7" class="headerlink" title="数据范围"></a>数据范围</h3><ul>
<li><code>1 &lt;= grid.length * grid[0].length &lt;= 20</code></li>
</ul>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>首先对所有合法坐标(<code>grid[i][j]!=-1</code>)映射为<code>0~cnt</code></p>
<ul>
<li>状态表示</li>
</ul>
<p>$f[j][state]$表示当前落在第$j$个点上状态为$state$(经历过$state$中位数为$1$的点)的方案数</p>
<ul>
<li>状态转移<br>$f[j_{next}][state | j_{next}] += f[j][state] ,其中j_{next}代表点j能到的邻居点$</li>
</ul>
<p>需要考虑当前落点$j$状态能继续往$j_{next}$走的条件:</p>
<ol>
<li>$j$被$state$包含</li>
<li>有方案数到$f[j][state]$</li>
</ol>
<h3 id="最终答案"><a href="#最终答案" class="headerlink" title="最终答案"></a>最终答案</h3><p>经历过的点==所有点,落点为<code>end</code>的方案数$f[end][(1&lt;&lt;tot)-1]$ </p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">uniquePathsIII</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> grid<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        dirs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
        m<span class="token punctuation">,</span>n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>grid<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span>grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        idx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span>m<span class="token operator">*</span>n <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token operator">*</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span>
        f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>m<span class="token operator">*</span>n<span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token operator">*</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span>
        pairs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        m<span class="token punctuation">,</span>n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>grid<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span>grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        start<span class="token punctuation">,</span>end<span class="token punctuation">,</span>tot<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token keyword">continue</span>
                idx<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> tot
                pairs<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">:</span>start <span class="token operator">=</span> idx<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
                <span class="token keyword">if</span> grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">:</span>end <span class="token operator">=</span> idx<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
                tot<span class="token operator">+=</span><span class="token number">1</span>
        f<span class="token punctuation">[</span>start<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>start<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span>
        <span class="token comment"># f[j][state] 落在j点上 状态state</span>
        <span class="token comment"># 遍历每个状态</span>
        <span class="token keyword">for</span> state <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>tot<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># 遍历每个候选 出发点j</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>tot<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token comment"># 不合法:如果当前状态没有点j 则j不能作为当前落点 or 当前状态state 落点j没有方案数</span>
                <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token punctuation">(</span>state<span class="token operator">>></span>j<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">1</span> <span class="token keyword">or</span> f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token keyword">continue</span>
                <span class="token keyword">for</span> dx<span class="token punctuation">,</span>dy <span class="token keyword">in</span> dirs<span class="token punctuation">:</span>
                    nx<span class="token punctuation">,</span>ny <span class="token operator">=</span> pairs<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span>dx<span class="token punctuation">,</span>pairs<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>dy
                    <span class="token keyword">if</span> nx<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token keyword">or</span> nx<span class="token operator">>=</span>m <span class="token keyword">or</span> ny<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token keyword">or</span> ny<span class="token operator">>=</span>n <span class="token keyword">or</span> grid<span class="token punctuation">[</span>nx<span class="token punctuation">]</span><span class="token punctuation">[</span>ny<span class="token punctuation">]</span><span class="token operator">==</span><span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">or</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>state <span class="token operator">>></span> idx<span class="token punctuation">[</span>nx<span class="token punctuation">]</span><span class="token punctuation">[</span>ny<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">continue</span>
                    f<span class="token punctuation">[</span>idx<span class="token punctuation">[</span>nx<span class="token punctuation">]</span><span class="token punctuation">[</span>ny<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>state<span class="token operator">|</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>idx<span class="token punctuation">[</span>nx<span class="token punctuation">]</span><span class="token punctuation">[</span>ny<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">+=</span>f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>state<span class="token punctuation">]</span>
        <span class="token keyword">return</span> f<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>tot<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="leetcode-1125-最小的必要团队"><a href="#leetcode-1125-最小的必要团队" class="headerlink" title="leetcode 1125 最小的必要团队"></a>leetcode 1125 最小的必要团队</h2><p>作为项目经理，你规划了一份需求的技能清单<code>req_skills</code>，并打算从备选人员名单<code>people</code>中选出些人组成一个「必要团队」（ 编号为<code>i</code>的备选人员<code>people[i]</code>含有一份该备选人员掌握的技能列表）。</p>
<p>所谓「必要团队」，就是在这个团队中，对于所需求的技能列表<code>req_skills</code> 中列出的每项技能，团队中至少有一名成员已经掌握。</p>
<p>我们可以用每个人的编号来表示团队中的成员：例如，团队<code>team = [0, 1, 3]</code>表示掌握技能分别为<code>people[0]，people[1]</code>，和<code>people[3]</code>的备选人员。</p>
<p>请你返回 任一规模最小的必要团队，团队成员用人员编号表示。你可以按任意顺序返回答案，本题保证答案存在。</p>
<h3 id="示例-7"><a href="#示例-7" class="headerlink" title="示例"></a>示例</h3><pre class="line-numbers language-none"><code class="language-none">输入：req_skills &#x3D; [&quot;java&quot;,&quot;nodejs&quot;,&quot;reactjs&quot;], people &#x3D; [[&quot;java&quot;],[&quot;nodejs&quot;],[&quot;nodejs&quot;,&quot;reactjs&quot;]]
输出：[0,2]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="数据范围-8"><a href="#数据范围-8" class="headerlink" title="数据范围"></a>数据范围</h3><ul>
<li><code>1 &lt;= req_skills.length &lt;= 16</code></li>
<li><code>1 &lt;= people.length &lt;= 60</code></li>
<li><code>1 &lt;= people[i].length, req_skills[i].length, people[i][j].length&lt;= 16</code></li>
<li><code>req_skills和people[i]中的元素分别各不相同</code></li>
<li><code>req_skills[i][j], people[i][j][k]都由小写英文字母组成</code></li>
<li><code>本题保证「必要团队」一定存在</code></li>
</ul>
<h3 id="思路-3"><a href="#思路-3" class="headerlink" title="思路"></a>思路</h3><ul>
<li><p>状态表示<br>  $f[state]$为技能满足状态为$state$时需要的最少人数数组</p>
</li>
<li><p>状态转移<br>  遍历$people$中的每个人</p>
<p>  遍历$0~(1&lt;&lt;n)-1$每个状态$cur$,则$cur$加上$people[i]$能到的下一个状态为$ne=cur|skill(people[i])$</p>
<p>  $f[ne] = f[state] + [i] (满足条件时转移:如果ne现在最少人数&gt;cur最少人数+1)$</p>
</li>
</ul>
<h3 id="答案-4"><a href="#答案-4" class="headerlink" title="答案"></a>答案</h3><p>所有技能都被满足时的最少人数数组<br>$f[(1&lt;&lt;n)-1]$</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">smallestSufficientTeam</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> req_skills<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">,</span> people<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>req_skills<span class="token punctuation">)</span>
        f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>people<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span>
        f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token comment"># 把技能映射为 状态</span>
        state <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            state<span class="token punctuation">[</span>req_skills<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>i
        
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>people<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            skill <span class="token operator">=</span> <span class="token number">0</span>
            <span class="token keyword">for</span> s <span class="token keyword">in</span> people<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>
                skill<span class="token operator">|</span><span class="token operator">=</span>state<span class="token punctuation">[</span>s<span class="token punctuation">]</span>
            <span class="token keyword">for</span> cur<span class="token punctuation">,</span>cur_ls <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">:</span>
                ne <span class="token operator">=</span> cur<span class="token operator">|</span>skill
                <span class="token keyword">if</span> ne<span class="token operator">!=</span>cur <span class="token keyword">and</span> <span class="token builtin">len</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>ne<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token builtin">len</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span>
                    f<span class="token punctuation">[</span>ne<span class="token punctuation">]</span><span class="token operator">=</span>cur_ls<span class="token operator">+</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token keyword">return</span> f<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="leetcode-1178-猜字谜"><a href="#leetcode-1178-猜字谜" class="headerlink" title="leetcode 1178 猜字谜"></a>leetcode 1178 猜字谜</h2><p>外国友人仿照中国字谜设计了一个英文版猜字谜小游戏，请你来猜猜看吧。</p>
<p>字谜的迷面<code>puzzle</code> 按字符串形式给出，如果一个单词<code>word</code>符合下面两个条件，那么它就可以算作谜底：</p>
<p>单词<code>word</code>中包含谜面<code>puzzle</code>的第一个字母。<br>单词<code>word</code>中的每一个字母都可以在谜面<code>puzzle</code>中找到。<br>例如，如果字谜的谜面是 <code>&quot;abcdefg&quot;</code>，那么可以作为谜底的单词有 <code>&quot;faced&quot;</code>, <code>&quot;cabbage&quot;</code>, 和 <code>&quot;baggage&quot;</code>；而 <code>&quot;beefed&quot;</code>（不含字母 <code>&quot;a&quot;</code>）以及<code>&quot;based&quot;</code>（其中的 <code>&quot;s&quot;</code> 没有出现在谜面中）。<br>返回一个答案数组<code>answer</code>，数组中的每个元素<code>answer[i]</code>是在给出的单词列表 <code>words</code> 中可以作为字谜迷面<code>puzzles[i]</code>所对应的谜底的单词数目。</p>
<h3 id="示例-8"><a href="#示例-8" class="headerlink" title="示例"></a>示例</h3><pre class="line-numbers language-none"><code class="language-none">输入：
words &#x3D; [&quot;aaaa&quot;,&quot;asas&quot;,&quot;able&quot;,&quot;ability&quot;,&quot;actt&quot;,&quot;actor&quot;,&quot;access&quot;], 
puzzles &#x3D; [&quot;aboveyz&quot;,&quot;abrodyz&quot;,&quot;abslute&quot;,&quot;absoryz&quot;,&quot;actresz&quot;,&quot;gaswxyz&quot;]
输出：[1,1,3,2,4,0]
解释：
1 个单词可以作为 &quot;aboveyz&quot; 的谜底 : &quot;aaaa&quot; 
1 个单词可以作为 &quot;abrodyz&quot; 的谜底 : &quot;aaaa&quot;
3 个单词可以作为 &quot;abslute&quot; 的谜底 : &quot;aaaa&quot;, &quot;asas&quot;, &quot;able&quot;
2 个单词可以作为 &quot;absoryz&quot; 的谜底 : &quot;aaaa&quot;, &quot;asas&quot;
4 个单词可以作为 &quot;actresz&quot; 的谜底 : &quot;aaaa&quot;, &quot;asas&quot;, &quot;actt&quot;, &quot;access&quot;
没有单词可以作为 &quot;gaswxyz&quot; 的谜底，因为列表中的单词都不含字母 &#39;g&#39;。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="数据范围-9"><a href="#数据范围-9" class="headerlink" title="数据范围"></a>数据范围</h3><ul>
<li><code>1 &lt;= words.length &lt;= 10^5</code></li>
<li><code>4 &lt;= words[i].length &lt;= 50</code></li>
<li><code>1 &lt;= puzzles.length &lt;= 10^4</code></li>
<li><code>puzzles[i].length == 7</code></li>
<li><code>words[i][j], puzzles[i][j]都是小写英文字母。</code></li>
<li><code>每个puzzles[i]所包含的字符都不重复。</code></li>
</ul>
<h3 id="思路-4"><a href="#思路-4" class="headerlink" title="思路"></a>思路</h3><ul>
<li><p>状态表示</p>
<p>  将字谜<code>puzzle</code>及单词<code>word</code>按包含<code>a~z</code>中字母集合转化为$26$位$2$进制数</p>
</li>
<li><p>状态转移<br>  用字典<code>word_dic</code>记录<code>words</code>中不同状态数的个数<br>  枚举<code>puzzles</code>中的每个<code>puzzle</code><br>  构建<code>puzzle</code>包含<code>puzzle[0]</code>的状态子集<code>subset</code><br>  遍历$subset$中的每个状态$state$,有$res+=word\underline{~} dic[state] 如果state \in word\underline{~} dic$<br>  $(说明puzzle的子集状态state在words中有word\underline{~} dic[state]个对应的word可作为谜底) $</p>
</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">class Solution:
    def findNumOfValidWords(self, words: List[str], puzzles: List[str]) -&gt; List[int]:
        res &#x3D; []
        n &#x3D; len(words)
        word_state &#x3D; [0]*n
        for i in range(n):
            for j in words[i]:
                word_state[i] |&#x3D; 1&lt;&lt;(ord(j)-ord(&#39;a&#39;))
        # 统计包含字符种类状态为state的字符串有多少个
        # state[&quot;pleas&quot;]&#x3D;state[&quot;please&quot;] &#x3D; 1&lt;&lt;p+1&lt;&lt;l+1&lt;&lt;e+1&lt;&lt;a+1&lt;&lt;s
        word_dic &#x3D; &#123;&#125;
        for state in word_state:
            word_dic[state] &#x3D; word_dic.get(state,0)+1
        # 遍历所有谜面
        for puzzle in puzzles:
            # 将谜面puzzle的包含puzzle[0]所有子状态加入subset中
            subset &#x3D; set()
            # 状压常规写法:搜所有包含puzzle[0]的状态子集
            state_p &#x3D; 0
            for ch in puzzle:
                state_p|&#x3D;1&lt;&lt;(ord(ch)-ord(&#39;a&#39;))
            tmp &#x3D; state_p
            while tmp:
                if (tmp&amp;(1&lt;&lt;(ord(puzzle[0])-ord(&#39;a&#39;)))):
                    subset.add(tmp)
                tmp &#x3D; (tmp-1)&amp;state_p
            sums &#x3D; 0
            # 遍历所有包含puzzle[0]的子集中字符种类状态在words中的个数
            for state in subset:
                # 如果dic中有word的
                if state in word_dic:
                    sums+&#x3D;word_dic[state]
            res.append(sums)
        return res<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="leetcode-1255-得分最高的单词集合"><a href="#leetcode-1255-得分最高的单词集合" class="headerlink" title="leetcode 1255 得分最高的单词集合"></a>leetcode 1255 得分最高的单词集合</h2><p>你将会得到一份单词表<code>words</code>，一个字母表<code>letters</code>（可能会有重复字母），以及每个字母对应的得分情况表<code>score</code>。</p>
<p>请你帮忙计算玩家在单词拼写游戏中所能获得的「最高得分」：能够由<code>letters</code>里的字母拼写出的任意属于 <code>words</code>单词子集中，分数最高的单词集合的得分。</p>
<p>单词拼写游戏的规则概述如下：</p>
<ul>
<li><p>玩家需要用字母表<code>letters</code> 里的字母来拼写单词表<code>words</code>中的单词。</p>
</li>
<li><p>可以只使用字母表<code>letters</code> 中的部分字母，但是每个字母最多被使用一次。</p>
</li>
<li><p>单词表 <code>words</code>中每个单词只能计分（使用）一次。</p>
</li>
<li><p>根据字母得分情况表<code>score</code>，字母 <code>&#39;a&#39;,&#39;b&#39;,&#39;c&#39;, ... ,&#39;z&#39;</code> 对应的得分分别为 <code>score[0], score[1],...,score[25]</code>。</p>
</li>
<li><p>本场游戏的「得分」是指：玩家所拼写出的单词集合里包含的所有字母的得分之和。</p>
</li>
</ul>
<h3 id="示例-9"><a href="#示例-9" class="headerlink" title="示例"></a>示例</h3><pre class="line-numbers language-none"><code class="language-none">输入：words &#x3D; [&quot;dog&quot;,&quot;cat&quot;,&quot;dad&quot;,&quot;good&quot;], letters &#x3D; [&quot;a&quot;,&quot;a&quot;,&quot;c&quot;,&quot;d&quot;,&quot;d&quot;,&quot;d&quot;,&quot;g&quot;,&quot;o&quot;,&quot;o&quot;], score &#x3D; [1,0,9,5,0,0,3,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0]
输出：23
解释：
字母得分为  a&#x3D;1, c&#x3D;9, d&#x3D;5, g&#x3D;3, o&#x3D;2
使用给定的字母表 letters，我们可以拼写单词 &quot;dad&quot; (5+1+5)和 &quot;good&quot; (3+2+2+5)，得分为 23 。
而单词 &quot;dad&quot; 和 &quot;dog&quot; 只能得到 21 分。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="数据范围-10"><a href="#数据范围-10" class="headerlink" title="数据范围"></a>数据范围</h3><ul>
<li><code>1 &lt;= words.length &lt;= 14</code></li>
<li><code>1 &lt;= words[i].length &lt;= 15</code></li>
<li><code>1 &lt;= letters.length &lt;= 100</code></li>
<li><code>letters[i].length == 1</code></li>
<li><code>score.length ==26</code></li>
<li><code>0 &lt;= score[i] &lt;= 10</code></li>
<li><code>words[i]和letters[i]只包含小写的英文字母。</code></li>
</ul>
<h3 id="思路-5"><a href="#思路-5" class="headerlink" title="思路"></a>思路</h3><ul>
<li>状态表示<br>  $state$:用了$words$中各个单词的状态<br>  遍历$1 \sim (1&lt;&lt;n)$每个状态$cur$计算不同字母个数 及状态对应的分数$score(cur)$<br>  合法状态需要满足$cur$中每个字母$\leq$给定的字母表$letters$中每个字母的个数</li>
</ul>
<h3 id="答案-5"><a href="#答案-5" class="headerlink" title="答案"></a>答案</h3><p>$max(score(state)) 对所有合法状态state$<br><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">maxScoreWords</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> words<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">,</span> letters<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">,</span> score<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span>
        wordscore <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span>n
        wordchar <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">26</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span>
        letterchar <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">26</span>
        <span class="token keyword">for</span> ch <span class="token keyword">in</span> letters<span class="token punctuation">:</span>
            letterchar<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token operator">-</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">+=</span><span class="token number">1</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            word <span class="token operator">=</span> words<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            <span class="token keyword">for</span> ch <span class="token keyword">in</span> word<span class="token punctuation">:</span>
                wordscore<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+=</span>score<span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token operator">-</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
                wordchar<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token builtin">ord</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token operator">-</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">+=</span><span class="token number">1</span>
        res <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token comment"># 遍历每个状态</span>
        <span class="token keyword">for</span> cur <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            tot <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">26</span>
            curscore <span class="token operator">=</span> <span class="token number">0</span>
            <span class="token comment"># 遍历cur中位为1的用到的word[j] 累加wordscore[j] 计算cur的分数</span>
            <span class="token comment"># 并统计以及状态cur中26个字母各自的个数tot[]</span>
            j<span class="token operator">=</span><span class="token number">0</span>
            <span class="token keyword">while</span> cur<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> cur<span class="token operator">&amp;</span><span class="token number">1</span><span class="token punctuation">:</span>
                    <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                        tot<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">+=</span>wordchar<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span>
                    curscore<span class="token operator">+=</span>wordscore<span class="token punctuation">[</span>j<span class="token punctuation">]</span>
                cur<span class="token operator">>></span><span class="token operator">=</span><span class="token number">1</span>
                j<span class="token operator">+=</span><span class="token number">1</span>
            <span class="token comment"># 遍历cur的每个字母个数tot[i] 需要tot[i]&lt;=letterchar[i] 我们能用的字母集合letters中每个字母的个数</span>
            flag <span class="token operator">=</span> <span class="token boolean">True</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> tot<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">></span>letterchar<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>
                    flag <span class="token operator">=</span> <span class="token boolean">False</span>
                    <span class="token keyword">break</span>
            <span class="token keyword">if</span> flag<span class="token punctuation">:</span>
                res <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span>curscore<span class="token punctuation">)</span>
        <span class="token keyword">return</span> res<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>
<h2 id="leetcode-1434-每个人戴不同帽子的方案数"><a href="#leetcode-1434-每个人戴不同帽子的方案数" class="headerlink" title="leetcode 1434 每个人戴不同帽子的方案数"></a>leetcode 1434 每个人戴不同帽子的方案数</h2><p>总共有 <code>n</code>个人和 <code>40</code> 种不同的帽子，帽子编号从 <code>1</code> 到 <code>40</code> 。</p>
<p>给你一个整数列表的列表<code>hats</code>，其中<code>hats[i]</code>是第 `i个人所有喜欢帽子的列表。</p>
<p>请你给每个人安排一顶他喜欢的帽子，确保每个人戴的帽子跟别人都不一样，并返回方案数。</p>
<p>由于答案可能很大，请返回它对<code>10^9 + 7</code>取余后的结果。</p>
<h3 id="示例-10"><a href="#示例-10" class="headerlink" title="示例"></a>示例</h3><pre class="line-numbers language-none"><code class="language-none">输入：hats &#x3D; [[3,4],[4,5],[5]]
输出：1
解释：给定条件下只有一种方法选择帽子。
第一个人选择帽子 3，第二个人选择帽子 4，最后一个人选择帽子 5。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="数据范围-11"><a href="#数据范围-11" class="headerlink" title="数据范围"></a>数据范围</h3><ul>
<li><code>n == hats.length</code></li>
<li><code>1 &lt;= n &lt;= 10</code></li>
<li><code>1 &lt;= hats[i].length &lt;= 40</code></li>
<li><code>1 &lt;= hats[i][j] &lt;= 40</code></li>
<li><code>hats[i] 包含一个数字互不相同的整数列表。</code></li>
</ul>
<h3 id="思路-6"><a href="#思路-6" class="headerlink" title="思路"></a>思路</h3><ul>
<li>状态表示<br>  $f[i][state]$:处理到第$i$顶帽子时,n个人选美选好帽子的状态为$state$的方案数</li>
<li>状态转移<br>  子集:<br>  从第$1$顶帽子遍历到第$max(hats)$顶帽子<br>  <code>第i顶帽子是 |1 由当前的状态中的人选 |2 不由当前状态中的人选</code><br>  $f[i][state] = f[i-1][state] + \sum_{j}f[i-1][state-(1&lt;&lt;j)] (如果第j个人能选第i顶帽子)$<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">numberWays</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> hats<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        maxhat <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span>hats<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>hats<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        mod <span class="token operator">=</span> <span class="token number">1e9</span><span class="token operator">+</span><span class="token number">7</span>
        n <span class="token operator">=</span>  <span class="token builtin">len</span><span class="token punctuation">(</span>hats<span class="token punctuation">)</span>
        f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>maxhat<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        hat2person <span class="token operator">=</span> collections<span class="token punctuation">.</span>defaultdict<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> h <span class="token keyword">in</span> hats<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>
                <span class="token comment"># hat2person[h] = hat2person.get(h,[])</span>
                hat2person<span class="token punctuation">[</span>h<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>
        <span class="token comment"># 处理0个帽子,没有人用帽子的方案数=1</span>
        f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span>
        <span class="token comment"># 逐个遍历帽子 则到第i个帽子的时候前面的人都没用过第i顶帽子</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>maxhat<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> state <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token comment"># 如果不用第i个帽子,方案数=处理了前i-1个帽子的方案数</span>
                f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>state<span class="token punctuation">]</span> <span class="token operator">=</span> f<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>state<span class="token punctuation">]</span>
                <span class="token keyword">for</span> j <span class="token keyword">in</span> hat2person<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token comment">#遍历对第i顶帽子能用的人j</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>state <span class="token operator">>></span> j<span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token comment">#如果当前状态有第j个人 则当前状态能从集合中去掉j 不选第i个帽子时的状态转移过来</span>
                        f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>state<span class="token punctuation">]</span> <span class="token operator">+=</span> f<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>state<span class="token operator">-</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>j<span class="token punctuation">)</span><span class="token punctuation">]</span>
                f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token operator">%=</span>mod        
        <span class="token keyword">return</span> <span class="token builtin">int</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>maxhat<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
</ul>
<h2 id="leetcode1542-找出最长的超赞子字符串"><a href="#leetcode1542-找出最长的超赞子字符串" class="headerlink" title="leetcode1542 找出最长的超赞子字符串"></a>leetcode1542 找出最长的超赞子字符串</h2><p>给你一个字符串 <code>s</code> 。请返回 <code>s</code> 中最长的 超赞子字符串 的长度。</p>
<p>「超赞子字符串」需满足满足下述两个条件：</p>
<ul>
<li>该字符串是 <code>s</code> 的一个非空子字符串</li>
<li>进行任意次数的字符交换后，该字符串可以变成一个回文字符串</li>
</ul>
<h3 id="示例-11"><a href="#示例-11" class="headerlink" title="示例"></a>示例</h3><pre class="line-numbers language-none"><code class="language-none">输入：s &#x3D; &quot;3242415&quot;
输出：5
解释：&quot;24241&quot; 是最长的超赞子字符串，交换其中的字符后，可以得到回文 &quot;24142&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="数据范围-12"><a href="#数据范围-12" class="headerlink" title="数据范围"></a>数据范围</h3><ul>
<li><p><code>1 &lt;= s.length &lt;= 10^5</code></p>
</li>
<li><p><code>s 仅由数字组成</code></p>
</li>
</ul>
<h3 id="思路-7"><a href="#思路-7" class="headerlink" title="思路"></a>思路</h3><p>回文子串中各个数字中最多只有一个是奇数,因此我们可以用子串$s[i:j]$的奇偶性状态判断是否回文,等价于$state[s[:i]]$和$state[s[:j]]$在位数上<strong>最多只有一位</strong>不同</p>
<ul>
<li><p>状态表示<br>  维护状态映射到下标的前缀奇偶性字典$prefix$<br>  $prefix[state]=j$为$s[:j]$中$0\sim 9$各个数字个数的奇偶性状态为state</p>
</li>
<li><p>状态转移</p>
<p>  $state$初始化为<code>0000000000</code></p>
<p>  遍历$s$中的每个字符,当前遍历到了第$j$个字符$num$,则$s[:j]$中数$num$的个数$+1$,奇偶性与$state$中$1&lt;&lt;num$位相反,所以通过异或将当前状态更新为$state \bigoplus (1&lt;&lt;num)$</p>
<p>  如果是第$1$次碰到奇偶性状态$state$,则$f[state]=j$</p>
<ol>
<li><strong>找全偶子串</strong>:如果是第$\geq 2$次碰到奇偶性状态$state$,则$state[s[:j]]-state[s[:prefix[state]]]=0$ 即子串$s[prefix[state]:j]$的奇偶性为全偶数,那么可以用子串$s[prefix[state]:j]$的长度更新$res=max(res,j-prefix[state])$</li>
<li><strong>找只有1个奇数的子串</strong>:依次更改$state$中的每个位置的奇偶,$state_{ne}=state^(1&lt;&lt;k) for k in [0,9]当state_{ne}在字典中(下标小于j的时候出现过)$,则$state[s[:j]]-state_{ne}[s[:prefix[state_{ne}]]]=1$ 即子串$s[prefix[state_{ne}]:j]$的奇偶性为只有一个奇数,那么可以用子串$s[prefix[state_{ne}]:j]$的长度更新$res=max(res,j-prefix[state_{ne}])$</li>
</ol>
</li>
</ul>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">longestAwesome</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
        prefix <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">&#125;</span>
        res<span class="token punctuation">,</span>state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            num <span class="token operator">=</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">"0"</span><span class="token punctuation">)</span>
            state <span class="token operator">^</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>num<span class="token punctuation">)</span>
            <span class="token keyword">if</span> state <span class="token keyword">in</span> prefix<span class="token punctuation">:</span><span class="token comment">#如果有这个状态 则s[prefix[state]:j]奇偶性为全偶 所以更新答案</span>
                res <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span>j<span class="token operator">-</span>prefix<span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span><span class="token comment">#如果第一次出现这个状态</span>
                prefix<span class="token punctuation">[</span>state<span class="token punctuation">]</span> <span class="token operator">=</span> j
            <span class="token comment"># 当前状态更改一位数的奇偶性的状态state_ne</span>
            <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                state_ne <span class="token operator">=</span> state <span class="token operator">^</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>k<span class="token punctuation">)</span>
                <span class="token keyword">if</span> state_ne <span class="token keyword">in</span> prefix<span class="token punctuation">:</span><span class="token comment">#如果state_ne在之前有更小的下标碰到过,则子串s[prefix[state_ne]:j]是只有一位数个数是奇数的子串</span>
                    res <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span>j<span class="token operator">-</span>prefix<span class="token punctuation">[</span>state_ne<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> res<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="leetcode-1681-最小不兼容性"><a href="#leetcode-1681-最小不兼容性" class="headerlink" title="leetcode 1681 最小不兼容性"></a>leetcode 1681 最小不兼容性</h2><p>给你一个整数数组 <code>nums</code>​​​ 和一个整数 <code>k</code> 。你需要将这个数组划分到 <code>k</code> 个相同大小的子集中，使得同一个子集里面没有两个相同的元素。</p>
<p>一个子集的 不兼容性 是该子集里面最大值和最小值的差。</p>
<p>请你返回将数组分成 <code>k</code> 个子集后，各子集 不兼容性 的 和 的 最小值 ，如果无法分成分成 <code>k</code> 个子集，返回 <code>-1</code> 。</p>
<p>子集的定义是数组中一些数字的集合，对数字顺序没有要求。</p>
<h3 id="示例-12"><a href="#示例-12" class="headerlink" title="示例"></a>示例</h3><pre class="line-numbers language-none"><code class="language-none">输入：nums &#x3D; [1,2,1,4], k &#x3D; 2
输出：4
解释：最优的分配是 [1,2] 和 [1,4] 。
不兼容性和为 (2-1) + (4-1) &#x3D; 4 。
注意到 [1,1] 和 [2,4] 可以得到更小的和，但是第一个集合有 2 个相同的元素，所以不可行。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="数据范围-13"><a href="#数据范围-13" class="headerlink" title="数据范围"></a>数据范围</h3><ul>
<li><code>1 &lt;= k &lt;= nums.length &lt;= 16</code></li>
<li><code>nums.length 能被 k 整除。</code></li>
<li><code>1 &lt;= nums[i] &lt;= nums.length</code></li>
</ul>
<h3 id="思路-8"><a href="#思路-8" class="headerlink" title="思路"></a>思路</h3><ol>
<li><p>dfs+剪枝</p>
<p> dfs枚举每种合法的组合并计算兼容性</p>
</li>
<li><p>状压dp</p>
</li>
</ol>
<ul>
<li><p>状态表示</p>
<p>  $f[state]$ 已经凑好了若干组 且已经用的数为1的二进制集合状态为state的所有方案中的最小值</p>
</li>
<li><p>状态转移</p>
<p>  闫式dp分析</p>
<p>  子集$j$为$state$这种情况下 最后一组加入的组为子集$j$,</p>
<p>  则$j$加入前的所有方案的最小值$=f[state-j]$,</p>
<p>  加入$j$则需要加上子集$j$的兼容性$g[j]$,</p>
<p>  那么加入$j$前$state$转移到加入$j$后的$state$:</p>
<p>  $f[state] = f[state-j] + g[j]$</p>
</li>
</ul>
<p>方法一 DFS剪枝TLE<br><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">minimumIncompatibility</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> k<span class="token operator">==</span><span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token number">0</span>
        cnt <span class="token operator">=</span> collections<span class="token punctuation">.</span>Counter<span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
        maxi <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>cnt<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> cnt<span class="token punctuation">)</span>
        <span class="token keyword">if</span> maxi<span class="token operator">></span>k<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
        nums<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>res <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span>
        tmp <span class="token operator">=</span> collections<span class="token punctuation">.</span>defaultdict<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span>
        lens <span class="token operator">=</span> n<span class="token operator">//</span>k
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">:</span>
            tmp<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
        vis <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">def</span> <span class="token function">check</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
            sums <span class="token operator">=</span> <span class="token number">0</span>
            <span class="token keyword">for</span> x <span class="token keyword">in</span> path<span class="token punctuation">:</span>
                <span class="token keyword">if</span> path<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">:</span>
                    sums<span class="token operator">+=</span><span class="token builtin">max</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token builtin">min</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> sums<span class="token operator">></span>self<span class="token punctuation">.</span>res
        <span class="token keyword">def</span> <span class="token function">dfs</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>resi<span class="token punctuation">,</span>cntk<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> resi<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>res <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>res<span class="token punctuation">,</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token builtin">min</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span>
            <span class="token keyword">if</span> check<span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> i <span class="token keyword">not</span> <span class="token keyword">in</span> vis <span class="token keyword">and</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">not</span> <span class="token keyword">in</span> path<span class="token punctuation">[</span>cntk<span class="token punctuation">]</span><span class="token punctuation">:</span>
                    path<span class="token punctuation">[</span>cntk<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
                    vis<span class="token punctuation">.</span>add<span class="token punctuation">(</span>i<span class="token punctuation">)</span>
                    dfs<span class="token punctuation">(</span>path<span class="token punctuation">,</span>resi<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>cntk<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span>cntk<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">==</span>lens <span class="token keyword">else</span> dfs<span class="token punctuation">(</span>path<span class="token punctuation">,</span>resi<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>cntk<span class="token punctuation">)</span>
                    path<span class="token punctuation">[</span>cntk<span class="token punctuation">]</span><span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>
                    vis<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>i<span class="token punctuation">)</span>
        dfs<span class="token punctuation">(</span>tmp<span class="token punctuation">,</span>n<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>res<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><br>方法二 状压dp</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">minimumIncompatibility</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
        <span class="token keyword">if</span> k<span class="token operator">==</span>n<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token number">0</span>
        <span class="token keyword">if</span> k<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">:</span>
            cnt <span class="token operator">=</span> collections<span class="token punctuation">.</span>Counter<span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token builtin">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token operator">-</span><span class="token builtin">min</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token builtin">all</span><span class="token punctuation">(</span>cnt<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> cnt<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token operator">-</span><span class="token number">1</span>
        g <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token comment">#状态i的兼容性数组</span>
        f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token comment">#状态i的最小兼容性和</span>
        f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span>
        <span class="token keyword">def</span> <span class="token function">cnt1</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
            res <span class="token operator">=</span> <span class="token number">0</span>
            <span class="token keyword">while</span> x<span class="token punctuation">:</span>
                x<span class="token operator">=</span>x<span class="token operator">&amp;</span><span class="token punctuation">(</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
                res<span class="token operator">+=</span><span class="token number">1</span>
            <span class="token keyword">return</span> res
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> cnt1<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">!=</span>n<span class="token operator">//</span>k<span class="token punctuation">:</span>
                <span class="token keyword">continue</span>
            d <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token operator">>></span>j<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">:</span>
                    d<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>
            flag <span class="token operator">=</span> <span class="token boolean">False</span>
            d<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> d<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span>d<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                    flag <span class="token operator">=</span> <span class="token boolean">True</span>
                    <span class="token keyword">break</span>
            <span class="token keyword">if</span> flag<span class="token punctuation">:</span><span class="token comment">#如果状态i下 子集d中有相同的两个数</span>
                <span class="token keyword">continue</span>
            g<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>d<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token comment">#状态i下 兼容性g[i]</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#枚举i的所有子集j O(3^n)</span>
            <span class="token keyword">if</span> cnt1<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">%</span><span class="token punctuation">(</span>n<span class="token operator">//</span>k<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">continue</span>
            j <span class="token operator">=</span> i
            <span class="token keyword">while</span> j<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> g<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>
                    f<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>i<span class="token operator">-</span>j<span class="token punctuation">]</span><span class="token operator">+</span>g<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>
                j <span class="token operator">=</span> <span class="token punctuation">(</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>i
        res <span class="token operator">=</span> f<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token keyword">return</span> res <span class="token keyword">if</span> res<span class="token operator">!=</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token operator">-</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="leetcode-1655-分配重复整数"><a href="#leetcode-1655-分配重复整数" class="headerlink" title="leetcode 1655 分配重复整数"></a>leetcode 1655 分配重复整数</h2><h2 id="leetcode-1723-完成所有工作的最短时间"><a href="#leetcode-1723-完成所有工作的最短时间" class="headerlink" title="leetcode 1723 完成所有工作的最短时间"></a>leetcode 1723 完成所有工作的最短时间</h2><p>给你一个整数数组 jobs ，其中 jobs[i] 是完成第 i 项工作要花费的时间。</p>
<p>请你将这些工作分配给 k 位工人。所有工作都应该分配给工人，且每项工作只能分配给一位工人。工人的 工作时间 是完成分配给他们的所有工作花费时间的总和。请你设计一套最佳的工作分配方案，使工人的 最大工作时间 得以 最小化 。</p>
<p>返回分配方案中尽可能 最小 的 最大工作时间 。</p>
<h3 id="示例：-1"><a href="#示例：-1" class="headerlink" title="示例："></a>示例：</h3><pre class="line-numbers language-none"><code class="language-none">输入：jobs &#x3D; [3,2,3], k &#x3D; 3
输出：3
解释：给每位工人分配一项工作，最大工作时间是 3 。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="数据范围-14"><a href="#数据范围-14" class="headerlink" title="数据范围"></a>数据范围</h3><ul>
<li><code>1 &lt;= k &lt;= jobs.length &lt;= 12</code></li>
<li><code>1 &lt;= jobs[i] &lt;= 107</code></li>
</ul>
<h3 id="思路-9"><a href="#思路-9" class="headerlink" title="思路"></a>思路</h3><p>首先创建$sum[state]$数组表示每种状态下的用时之和</p>
<ul>
<li><p>状态表示</p>
<p>  $f[k][state] =$ 给第$k+1$组分配时 分配状态为$state$的所有组用时中最大值的最小值</p>
</li>
<li><p>状态转移</p>
<p>  给第$k+1$组分配时,对其所有子集进行遍历,<br>  $f[k][state] = min(max(f[k-1][state-substate],sum[substate]))\ for\ all\ substate$</p>
</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">&#123;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> f<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> sum<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">last_zero</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token keyword">int</span> last1 <span class="token operator">=</span> x<span class="token operator">-</span><span class="token punctuation">(</span>x<span class="token operator">&amp;</span><span class="token punctuation">(</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>last1<span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            last1<span class="token operator">>>=</span><span class="token number">1</span><span class="token punctuation">;</span>
            res<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">return</span> res<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">int</span> <span class="token function">minimumTimeRequired</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> jobs<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">memset</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">memset</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> jobs<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token function">last_zero</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//__builtin_ctz(i);</span>
            <span class="token keyword">int</span> y <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
            sum<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> sum<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">+</span> jobs<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">// 初始化第一组的工作时间</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> sum<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">// 从第二组到第k组的工作时间</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> cur <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>cur <span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> cur<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#123;</span>
                <span class="token keyword">int</span> mini <span class="token operator">=</span> INT_MAX<span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> subset <span class="token operator">=</span> cur<span class="token punctuation">;</span>subset<span class="token punctuation">;</span>subset <span class="token operator">=</span> cur<span class="token operator">&amp;</span><span class="token punctuation">(</span>subset<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">&#123;</span>
                    mini <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>mini<span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>cur <span class="token operator">-</span> subset<span class="token punctuation">]</span><span class="token punctuation">,</span>sum<span class="token punctuation">[</span>subset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
                f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>cur<span class="token punctuation">]</span> <span class="token operator">=</span> mini<span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token keyword">return</span> f<span class="token punctuation">[</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="LCP-13-寻宝"><a href="#LCP-13-寻宝" class="headerlink" title="LCP 13 寻宝"></a>LCP 13 寻宝</h2><p>我们得到了一副藏宝图，藏宝图显示，在一个迷宫中存在着未被世人发现的宝藏。</p>
<p>迷宫是一个二维矩阵，用一个字符串数组表示。它标识了唯一的入口（用 <code>&#39;S&#39;</code> 表示），和唯一的宝藏地点（用 <code>&#39;T&#39;</code> 表示）。但是，宝藏被一些隐蔽的机关保护了起来。在地图上有若干个机关点（用 <code>&#39;M&#39;</code> 表示），只有所有机关均被触发，才可以拿到宝藏。</p>
<p>要保持机关的触发，需要把一个重石放在上面。迷宫中有若干个石堆（用 <code>&#39;O&#39;</code> 表示），每个石堆都有无限个足够触发机关的重石。但是由于石头太重，我们一次只能搬一个石头到指定地点。</p>
<p>迷宫中同样有一些墙壁（用 <code>&#39;#&#39;</code> 表示），我们不能走入墙壁。剩余的都是可随意通行的点（用 <code>&#39;.&#39;</code> 表示）。石堆、机关、起点和终点（无论是否能拿到宝藏）也是可以通行的。</p>
<p>我们每步可以选择向上/向下/向左/向右移动一格，并且不能移出迷宫。搬起石头和放下石头不算步数。那么，从起点开始，我们最少需要多少步才能最后拿到宝藏呢？如果无法拿到宝藏，返回 <code>-1</code> 。</p>
<h3 id="示例：-2"><a href="#示例：-2" class="headerlink" title="示例："></a>示例：</h3><pre class="line-numbers language-none"><code class="language-none">输入： [&quot;S#O&quot;, &quot;M..&quot;, &quot;M.T&quot;]

输出：16

解释：最优路线为： S-&gt;O, cost &#x3D; 4, 去搬石头 O-&gt;第二行的M, cost &#x3D; 3, M机关触发 第二行的M-&gt;O, cost &#x3D; 3, 我们需要继续回去 O 搬石头。 O-&gt;第三行的M, cost &#x3D; 4, 此时所有机关均触发 第三行的M-&gt;T, cost &#x3D; 2，去T点拿宝藏。 总步数为16。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="限制："><a href="#限制：" class="headerlink" title="限制："></a>限制：</h3><ul>
<li><code>1 &lt;= maze.length &lt;= 100</code></li>
<li><code>1 &lt;= maze[i].length &lt;= 100</code></li>
<li><code>maze[i].length == maze[j].length</code></li>
<li><code>S 和 T 有且只有一个</code></li>
<li><code>0 &lt;= M的数量 &lt;= 16</code></li>
<li><code>0 &lt;= O的数量 &lt;= 40，题目保证当迷宫中存在 M 时，一定存在至少一个 O 。</code></li>
</ul>
<h3 id="思路-10"><a href="#思路-10" class="headerlink" title="思路"></a>思路</h3><ul>
<li><p>$maze$中，每个位置到地图上任意的其他位置的距离是不会变化的，因此使用BFS算法计算并保存（题解中实际上只计算了起点到任意点的距离以及每个机关i到任意点的距离）</p>
</li>
<li><p>使用$dist$数组，记录机关i到机关$j$的最短距离，从机关i到机关j需要经过一次石头，因此每计算一个$dist[i][j]$都需要遍历所有的石头</p>
</li>
<li><p>状态压缩的$dp$，利用二进制的$mask$来保存当前的状态，$dp[mask][j]$表示当前处于第$j$个机关，总的触发状态为$mask$所需要的最短路径。由于有$n_b$个机关，每个机关都有访问和未访问两种状态，共有$2^{nb}$个状态，因此需要$(1&lt;&lt;nb)*nb$的空间开销</p>
</li>
<li><p>最后，所有状态都被访问以后，还应当从最后一个状态$j$出发，前往终点，最终比较得到最短的距离</p>
</li>
</ul>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">minimalSteps</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> maze<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        dirs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        m<span class="token punctuation">,</span>n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>maze<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span>maze<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        keys<span class="token punctuation">,</span>locks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> maze<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'M'</span><span class="token punctuation">:</span><span class="token comment">#机关</span>
                    locks<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> maze<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'O'</span><span class="token punctuation">:</span><span class="token comment">#石堆</span>
                    keys<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> maze<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'S'</span><span class="token punctuation">:</span>
                    si <span class="token operator">=</span> i
                    sj <span class="token operator">=</span> j
                <span class="token keyword">if</span> maze<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'T'</span><span class="token punctuation">:</span>
                    ti <span class="token operator">=</span> i
                    tj <span class="token operator">=</span> j
        locks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>si<span class="token punctuation">,</span>sj<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> locks<span class="token comment">#把起点也作为锁 错因:start不是0 0而是si,sj</span>
        <span class="token comment"># print(locks)</span>
        <span class="token comment"># print(keys)</span>
        nk<span class="token punctuation">,</span>nl <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span>locks<span class="token punctuation">)</span>
        tdist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">*</span> n <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token comment">#终点和各点距离</span>
        kdist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">*</span> n <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>nk<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token comment">#石堆和各点距离</span>
        <span class="token comment"># print(kdist)</span>
        <span class="token keyword">def</span> <span class="token function">bfs</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">,</span>dist<span class="token punctuation">)</span><span class="token punctuation">:</span>
            q <span class="token operator">=</span> collections<span class="token punctuation">.</span>deque<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            visit <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token boolean">False</span><span class="token punctuation">]</span> <span class="token operator">*</span> n <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">]</span>
            q<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span>
            dist<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
            visit<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>
            <span class="token keyword">while</span> q<span class="token punctuation">:</span>
                x<span class="token punctuation">,</span>y <span class="token operator">=</span> q<span class="token punctuation">.</span>popleft<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">for</span> dx<span class="token punctuation">,</span>dy <span class="token keyword">in</span> dirs<span class="token punctuation">:</span>
                    nx<span class="token punctuation">,</span>ny <span class="token operator">=</span> x<span class="token operator">+</span>dx<span class="token punctuation">,</span>y<span class="token operator">+</span>dy
                    <span class="token keyword">if</span> nx<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token keyword">or</span> nx<span class="token operator">>=</span>m <span class="token keyword">or</span> ny<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token keyword">or</span> ny<span class="token operator">>=</span>n <span class="token keyword">or</span> visit<span class="token punctuation">[</span>nx<span class="token punctuation">]</span><span class="token punctuation">[</span>ny<span class="token punctuation">]</span> <span class="token keyword">or</span> maze<span class="token punctuation">[</span>nx<span class="token punctuation">]</span><span class="token punctuation">[</span>ny<span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'#'</span><span class="token punctuation">:</span>
                        <span class="token keyword">continue</span>
                    dist<span class="token punctuation">[</span>nx<span class="token punctuation">]</span><span class="token punctuation">[</span>ny<span class="token punctuation">]</span> <span class="token operator">=</span> dist<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span>
                    visit<span class="token punctuation">[</span>nx<span class="token punctuation">]</span><span class="token punctuation">[</span>ny<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>
                    q<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">(</span>nx<span class="token punctuation">,</span>ny<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>nk<span class="token punctuation">)</span><span class="token punctuation">:</span>
            bfs<span class="token punctuation">(</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>kdist<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
        bfs<span class="token punctuation">(</span>ti<span class="token punctuation">,</span>tj<span class="token punctuation">,</span>tdist<span class="token punctuation">)</span>

        <span class="token keyword">print</span><span class="token punctuation">(</span>kdist<span class="token punctuation">)</span>
        ldist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">*</span> nl <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>nl<span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>nl<span class="token punctuation">)</span><span class="token punctuation">:</span>
            i1<span class="token punctuation">,</span>j1 <span class="token operator">=</span> locks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>locks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token comment">#第i把锁的坐标</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>nl<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> i<span class="token operator">==</span>j<span class="token punctuation">:</span> <span class="token keyword">continue</span>
                i2<span class="token punctuation">,</span>j2 <span class="token operator">=</span> locks<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>locks<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token comment">#第j把锁的坐标</span>
                <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>nk<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#遍历k把钥匙与第i把及与第j把锁的距离的和的最小值</span>
                    ldist<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>ldist<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>kdist<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>i1<span class="token punctuation">]</span><span class="token punctuation">[</span>j1<span class="token punctuation">]</span> <span class="token operator">+</span> kdist<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>i2<span class="token punctuation">]</span><span class="token punctuation">[</span>j2<span class="token punctuation">]</span><span class="token punctuation">)</span>
        dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> nl<span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>nl<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token comment">#nl个锁开与没开的状态</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token comment">#第0把锁也就是起点打开时 初始化为0</span>
        <span class="token keyword">for</span> state <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>nl<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#对2^nl种 nl个锁开与不开的状态进行遍历</span>
            <span class="token keyword">for</span> cur <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>nl<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#对nl个锁进行遍历</span>
                <span class="token keyword">if</span> dp<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">[</span>state<span class="token punctuation">]</span><span class="token operator">==</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">continue</span><span class="token comment">#如果当前锁 </span>
                <span class="token comment">#下一步要打开的锁</span>
                <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>nl<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token comment"># 目标锁已经被打开 所以我们继续看下一把锁</span>
                    <span class="token keyword">if</span> state <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> i<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">continue</span>
                    <span class="token comment"># 目标锁未被打开 则把目标锁打开 </span>
                    ne <span class="token operator">=</span> state<span class="token operator">+</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> i<span class="token punctuation">)</span><span class="token comment">#则下一个状态是把目标锁打开</span>
                    <span class="token comment">#ldist[cur][i]存的是从当前锁 去最近的key拿钥匙再去i开锁的距离</span>
                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>ne<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>ne<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">[</span>state<span class="token punctuation">]</span> <span class="token operator">+</span> ldist<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token comment"># 出发去终点前的状态，应当是处于某一机关处，同时所有机关均已打开。</span>
        <span class="token comment"># 遍历所有机关的位置，得到最终的结果。</span>
        ans <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>nl<span class="token punctuation">)</span><span class="token punctuation">:</span>
            ans <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>nl<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>tdist<span class="token punctuation">[</span>locks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>locks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> ans <span class="token keyword">if</span> ans<span class="token operator">!=</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token operator">-</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="连通类状态压缩动态规划"><a href="#连通类状态压缩动态规划" class="headerlink" title="连通类状态压缩动态规划"></a>连通类状态压缩动态规划</h2><h2 id="leetcode-1349-参加考试的最大学生数"><a href="#leetcode-1349-参加考试的最大学生数" class="headerlink" title="leetcode 1349 参加考试的最大学生数"></a>leetcode 1349 参加考试的最大学生数</h2><p>给你一个<code>m*n</code>的矩阵 <code>seats</code>表示教室中的座位分布。如果座位是坏的（不可用），就用<code>&#39;#&#39;</code>表示；否则，用<code>&#39;.&#39;</code>表示。</p>
<p>学生可以看到左侧、右侧、左上、右上这四个方向上紧邻他的学生的答卷，但是看不到直接坐在他前面或者后面的学生的答卷。请你计算并返回该考场可以容纳的一起参加考试且无法作弊的最大学生人数。</p>
<p>学生必须坐在状况良好的座位上。</p>
<h3 id="示例-13"><a href="#示例-13" class="headerlink" title="示例:"></a>示例:</h3><pre class="line-numbers language-none"><code class="language-none">输入：seats &#x3D; [[&quot;#&quot;,&quot;.&quot;,&quot;#&quot;,&quot;#&quot;,&quot;.&quot;,&quot;#&quot;],
              [&quot;.&quot;,&quot;#&quot;,&quot;#&quot;,&quot;#&quot;,&quot;#&quot;,&quot;.&quot;],
              [&quot;#&quot;,&quot;.&quot;,&quot;#&quot;,&quot;#&quot;,&quot;.&quot;,&quot;#&quot;]]
输出：4
解释：教师可以让 4 个学生坐在可用的座位上，这样他们就无法在考试中作弊。 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="数据范围-15"><a href="#数据范围-15" class="headerlink" title="数据范围"></a>数据范围</h3><ul>
<li><code>seats只包含字符&#39;.&#39;和&#39;#&#39;</code></li>
<li><code>m ==seats.length</code></li>
<li><code>n ==seats[i].length</code></li>
<li><code>1 &lt;= m &lt;= 8</code></li>
<li><code>1 &lt;= n &lt;= 8</code></li>
</ul>
<h3 id="连通性状压dp"><a href="#连通性状压dp" class="headerlink" title="连通性状压dp"></a>连通性状压dp</h3><ul>
<li>状态表示<br>  $f[i][state]$ 第$i$行学生座位排布集合为$state$</li>
<li><p>状态转移<br>  $f[i-1][ne]=max(f[i-1][ne],f[i][cur]+cnt1(ne))$</p>
<p>  从最后一排往前排座位</p>
<p>  遍历前一排的所有合法状态$ne$ 合法条件:$ne$没有相邻两个1 同时有1的位置与’#’不冲突</p>
<p>  遍历当前排的所有合法状态$cur$ 合法条件:$cur$的1的相邻位上$ne$没有1</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">maxStudents</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> seats<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        m<span class="token punctuation">,</span>n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>seats<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span>seats<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span>m
        <span class="token keyword">def</span> <span class="token function">cnt1</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">:</span>
            res <span class="token operator">=</span> <span class="token number">0</span>
            <span class="token keyword">while</span> state<span class="token punctuation">:</span>
                state<span class="token operator">-=</span>state<span class="token operator">&amp;</span><span class="token operator">-</span>state
                res<span class="token operator">+=</span><span class="token number">1</span>
            <span class="token keyword">return</span> res
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> seats<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'#'</span><span class="token punctuation">:</span>
                    a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">|</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>j
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># 下一行状态ne</span>
            <span class="token keyword">for</span> ne <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token keyword">not</span> ne<span class="token operator">&amp;</span><span class="token punctuation">(</span>ne<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token keyword">not</span> ne<span class="token operator">&amp;</span><span class="token punctuation">(</span>ne<span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token keyword">not</span> ne<span class="token operator">&amp;</span>a<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                    <span class="token comment"># 当前行状态cur</span>
                    <span class="token keyword">for</span> cur <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
                        <span class="token keyword">if</span> <span class="token keyword">not</span> ne<span class="token operator">&amp;</span><span class="token punctuation">(</span>cur<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token keyword">not</span> ne<span class="token operator">&amp;</span><span class="token punctuation">(</span>cur<span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                            f<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>ne<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>ne<span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token operator">+</span>cnt1<span class="token punctuation">(</span>ne<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token builtin">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
</ul>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/Blogs/about" rel="external nofollow noreferrer">Leopold</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://leopoldacc.github.io/Blogs/Blogs/2020/12/07/%E7%8A%B6%E5%8E%8BDP/">https://leopoldacc.github.io/Blogs/Blogs/2020/12/07/%E7%8A%B6%E5%8E%8BDP/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/Blogs/about" target="_blank">Leopold</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/Blogs/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">
                                    <span class="chip bg-color">动态规划</span>
                                </a>
                            
                                <a href="/Blogs/tags/%E7%8A%B6%E6%80%81%E5%8E%8B%E7%BC%A9/">
                                    <span class="chip bg-color">状态压缩</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/Blogs/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/Blogs/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/Blogs/medias/reward/myalipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/Blogs/medias/reward/mywechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/Blogs/2020/12/08/%E7%BD%91%E7%BB%9C%E6%B5%81/">
                    <div class="card-image">
                        
                        
                        <img src="/Blogs/medias/featureimages/14.jpg" class="responsive-img" alt="网络流">
                        
                        <span class="card-title">网络流</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-12-08
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/Blogs/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" class="post-category">
                                    数据结构与算法
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/Blogs/tags/%E7%BD%91%E7%BB%9C%E6%B5%81/">
                        <span class="chip bg-color">网络流</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/Blogs/2020/12/07/%E8%B4%AA%E5%BF%83/">
                    <div class="card-image">
                        
                        
                        <img src="/Blogs/medias/featureimages/17.jpg" class="responsive-img" alt="贪心">
                        
                        <span class="card-title">贪心</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-12-07
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/Blogs/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" class="post-category">
                                    数据结构与算法
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/Blogs/tags/%E8%B4%AA%E5%BF%83/">
                        <span class="chip bg-color">贪心</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/Blogs/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/Blogs/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/Blogs/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/Blogs/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/Blogs/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\(', '\)']]}
    });
</script>


<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>
<!-- 代码语言 -->
<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>
<!-- 代码块复制 -->
<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>
<script type="text/javascript" src="/libs/codeBlock/clipboard.min.js"></script>
<!-- 代码块收缩 -->
<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script> 
<!-- 代码块折行 -->
<style type="text/css">code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }</style>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/Blogs/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/Blogs/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2020-2021</span>
            
            <span id="year">2020</span>
            <a href="/Blogs/about" target="_blank">Leopold</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/LeopoldACC" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1026928673@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1026928673" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1026928673" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/Blogs/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/Blogs/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/Blogs/libs/materialize/materialize.min.js"></script>
    <script src="/Blogs/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/Blogs/libs/aos/aos.js"></script>
    <script src="/Blogs/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/Blogs/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/Blogs/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/Blogs/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/Blogs/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="/Blogs/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
